# ReaD
Εισαγωγή
Υπολογιστική Νέφους
Παναγιώτης Παπαδημητρίου
Παραδείγματα Υπηρεσιών Υπολογιστικού Νέφους
Υπολογιστικό Νέφος και Φορητές Συσκευές
• Το υπολογιστικό νέφος είναι η αποθήκευση, επεξεργασία και χρήση 
δεδομένων από απομακρυσμένους υπολογιστές στους οποίους 
εξασφαλίζεται πρόσβαση μέσω του Διαδικτύου
• Τα δεδομένα αποθηκεύονται και επεξεργάζονται σε εξυπηρετητές 
(servers) που συνήθως εγκαθιστούνται και λειτουργούν σε μεγάλα 
κέντρα δεδομένων (datacenters)
– Οι υπηρεσίες υπολογιστικού νέφους βασίζονται στο μοντέλο 
πελάτη/εξυπηρετητή (client/server)
Υπολογιστικό Νέφος
Πώς οδηγηθήκαμε στο Νέφος;
• Ο ρυθμός αύξησης των δεδομένων είναι πολύ υψηλότερος από την 
αύξηση της ισχύος των υπολογιστών
• Ο όγκος των δεδομένων το 2020 αναμένεται να είναι 40-πλάσιος σε 
σχέση με το 2010
Πώς οδηγηθήκαμε στο Νέφος;
• Ραγδαία αύξηση διαδικτυακών εφαρμογών και υπηρεσιών
• Κοινωνικά δίκτυα (Facebook, Twitter, κτλ.)
• Υλικό παραγόμενο από χρήστες (π.χ. φωτογραφίες, βίντεο)
• Ταχύτερα και φθηνότερα δίκτυα 
– Ολοένα και ευρύτερη χρήση των δικτύων κινητής τηλεφωνίας για 
μεταφορά δεδομένων
• Αυξανόμενος αριθμός συσκεών με πρόσβαση στο Internet
– Ακόμη περισσότερο με την έλευση του “Internet of Things”
Κατακλυσμός Δεδομένων
• Κοινή χρήση:
– Οι εξυπηρετητές τίθενται στη διάθεση πολλών χρηστών
– Ο διαμοιρασμός των φυσικών πόρων κατά κανόνα επιτυγχάνεται 
μέσω τεχνολογιών εικονικοποίησης (virtualization)
• Δέσμευση πόρων κατά απαίτηση:
– Επιπλέον πόροι τίθενται στη διάθεση του χρήστη όποτε 
απαιτείται
• Τιμολόγηση ανάλογα με τη χρήση:
– Ο κάθε χρήστης χρώνεται με βάση τους πόρους που 
χρησιμοποίησε πραγματικά
Χαρακτηριστικά των Υπολογιστικών Νεφών
• Δημόσιο Νέφος (Public Cloud)
• Ιδιωτικό Νέφος (Private Cloud)
• Υβριδικό Νέφος (Hybrid Cloud)
Μοντέλα Ανάπτυξης Νέφους
• Οι εγκαταστάσεις υποδομής και οι προσφερόμενες υπηρεσίες, 
παρέχονται από εταιρείες – παρόχους (π.χ. Amazon, Google, 
Microsoft) σε ένα μεγάλο αριθμό χρηστών – πελατών
• Υπηρεσίες παρέχονται με βάση ένα συμφωνητικό (Service Level 
Agreement – SLA)
• Οι παρεχόμενες υπηρεσίες τιμολογούνται από τον πάροχο ανάλογα 
με τη χρήση και οι πελάτες χρεώνονται ανάλογα
• Είναι το πιο διαδεδομένο μοντέλο ανάπτυξης νέφους
Δημόσιο Νέφος
• Οι εγκαταστάσεις υποδομής και οι προσφερόμενες υπηρεσίες, 
παρέχονται από έναν οργανισμό σε χρήστες/υπαλλήλους του 
οργανισμού (π.χ. τράπεζες, πανεπιστήμια)
• Υψηλότερο κόστος σε σχέση με το Δημόσιο Νέφος καθώς ο 
οργανισμός πρέπει να εγκαταστήσει και να διαχειριστεί τα δικά του 
κέντρα δεδομένων (datacenters)
• Μεγαλύτερη εμπιστοσύνη (σε σχέση με το Δημόσιο Νέφος) καθώς οι 
υπηρεσίες παρέχονται από τον ίδιο τον οργανισμό
Ιδιωτικό Νέφος
• Συνδυασμός δημόσιου και ιδιωτικού νέφους:
– Μέρος των δεδομένων αποθηκεύεται στο ιδιωτικό νέφος και 
κάποιο άλλο στο δημόσιο νέφος
– Συνήθως τα περισσότερα σημαντικά και απόρρητα δεδομένα 
αποθηκεύονται στο ιδιωτικό νέφος 
• Το μοντέλο αυτό συνδυάζει τα πλεονεκτήματα του δημόσιου και 
ιδιωτικού νέφους:
– Υψηλότερο επίπεδο ασφάλειας και εμπιστοσύνης στο ιδιωτικό 
νέφος (αποθήκευση μικρού όγκου σημαντικών δεδομένων)
– Χαμηλότερο κόστος χρήσης στο δημόσιο νέφος (αποθήκευση 
μεγάλου όγκου λιγότερο σημαντικών δεδομένων)
Υβριδικό Νέφος
• Μείωση του κόστους:
– Δυνατότητα χρήσης και διαχείρισης εφαρμογών χωρίς την 
αγορά, κατοχή, διαχείριση και συντήρηση κάποιας υποδομής 
• Ευέλικτη δέσμευση πόρων:
– Δυνατότητα δέσμευσης και χρήσης υπολογιστικών πόρων 
ανάλογα με τις ανάγκες του χρήστη
– Όταν π.χ. προκύπτει η ανάγκη για περισσότερους 
υπολογιστικούς πόρους (σε περιόδους αιχμής), αυτοί μπορούν 
να διατεθούν μετά από απαίτηση του χρήστη, χωρίς την ανάγκη 
να αγοραστεί εξοπλισμός από τον χρήστη 
Πλεονεκτήματα Υπολογιστικών Νεφών
• Ευκολία πρόσβασης:
– Μέσω του Διαδικτύου, οι χρήστες έχουν πρόσβαση στα 
δεδομένα και στις εφαρμογές τους οπουδήποτε και από 
οποιαδήποτε συσκευή (π.χ., desktop PC, laptop, tablet, κινητό 
τηλέφωνο)
• Αξιοπιστία:
– Η δυνατότητα μετακίνησης εικονικών μηχανών αλλά και 
διατήρησης αντιγράφων των δεδομένων διασφαλίζουν την 
αξιόπιστη και απρόσκοπτη εκτέλεση εφαρμογών ακόμη και όταν 
παρουσιάζονται σφάλματα στο υλικό ή λογισμικό
Πλεονεκτήματα Υπολογιστικών Νεφών
• Ασφάλεια δεδομένων:
– Κακόβουλοι χρήστες ενδέχεται να αποκτήσουν πρόσβαση σε 
δεδομένα που έχουν αποθηκευτεί στο νέφος ή σε δεδομένα που 
μεταφέρονται από τη συσκευή του χρήστη προς το νέφος (και 
αντίστροφα)
• Πτώση απόδοσης:
– Η διαχείριση της υποδομής από τον πάροχο (π.χ. μετακίνηση 
εικονικών μηχανών) μπορεί να έχει επίπτωση στην απόδοση των 
εφαρμογών
Μειονεκτήματα Υπολογιστικών Νεφών
• Λογισμικό ως Υπηρεσία (Software as a Service – SaaS)
• Πλατφόρμα ως Υπηρεσία (Platform as a Service – PaaS)
• Υποδομή ως Υπηρεσία (Infrastructure as a Service – IaaS)
Μοντέλα Υπηρεσιών Νέφους
SaaS
PaaS
IaaS
Ευελιξία / 
Προσβασιμότητα
Ευκολία 
χρήσης
• Ο χρήστης έχει πρόσβαση σε μια εφαρμογή λογισμικού (π.χ. email, 
κειμενογράφος), η οποία φιλοξενείται και διαχειρίζεται από τον 
πάροχο
• Οι δυνατότητες ελέγχου από τον χρήστη περιορίζονται στην 
αλληλεπίδραση με την ίδια την εφαρμογή (συνήθως μέσω ενός 
φυλλομετρητή - browser)
– Ο χρήστης δεν έχει πρόσβαση στον υπολογιστή όπου 
φιλοξενείται το συγκεκριμένο λογισμικό
Λογισμικό ως Υπηρεσία (SaaS)
• Ο χρήστης έχει πρόσβαση σε ένα περιβάλλον ανάπτυξης και 
διαχείρισης εφαρμογών (π.χ. Google App Engine, MS Azure), το 
οποίο έχει εγκατασταθεί και φιλοξενείται από τον πάροχο
• Οι υπηρεσίες PaaS απευθύνονται σε πιο προχωρημένους χρήστες 
(συνήθως προγραμματιστές)
– Ένας χρήστης PaaS μπορεί να προσφέρει τις υπηρεσίες που 
έχει αναπτύξει σε άλλους πελάτες (ουσιαστικά επιτελώντας το 
ρόλο του παρόχου SaaS)
• Παρομοίως με το SaaS, o χρήστης PaaS δεν έχει άμεση πρόσβαση 
στον υπολογιστή όπου φιλοξενείται το συγκεκριμένο λογισμικό
Πλατφόρμα ως Υπηρεσία (PaaS)
• Ο χρήστης έχει πρόσβαση σε υπολογιστικούς πόρους που συνήθως 
παρέχονται με τη μορφή εικονικών υπολογιστών (virtual machines)
• Κάθε εικονική μηχανή παρέχει συγκεκριμένη υπολογιστική ισχύ, 
μνήμη RAM, αποθηκευτικό χώρο (ανάλογα με τις ανάγκες του 
χρήστη), ακόμη και (εικονικές) δικτυακές υποδοχές αν πρόκειται να 
συνδεθεί σε κάποιο δίκτυο.
Υποδομή ως Υπηρεσία (IaaS)
• Ο χρήστης έχει άμεση πρόσβαση στο Λ/Σ της εικονικής μηχανής και 
δυνατότητα εγκατάστασης και διαχείρισης λογισμικού
– Το επίπεδο πρόσβασης καθορίζεται από το συμφωνητικό 
παροχής υπηρεσιών (SLA) μεταξύ του παρόχου και του χρήστη 
• Η ίδια η υποδομή και οι φυσικοί πόροι ως σύνολο διαχειρίζονται από 
τον πάροχο
Υποδομή ως Υπηρεσία (IaaS)
Πόσο μεγάλο είναι το Νέφος;
Η Υποδομή Νέφους της Microsoft
Η Κλίμακα του Νέφους της Microsoft
Κέντρα Δεδομένων (Datacenters)
• Τα κέντρα δεδομένων αποτελούν τη βασική υποδομή για τη 
δημιουργία υπολογιστικών νεφών
– Κέντρα δεδομένων έχουν τεθεί σε λειτουργία από μεγάλες 
εταιρείες όπως Amazon, Google, HP, Microsoft, Facebook
Κέντρα Δεδομένων (Datacenters)
• Ευρεία κλίμακα:
– Ένα κέντρο δεδομένων συνήθως περιλαμβάνει δεκάδες έως 
εκατοντάδες χιλιάδες εξυπηρετητές
• Εικονικοποίηση:
– Ευρεία χρήση εικονικών μηχανών για τη βέλτιστη αξιοποίηση των 
υπολογιστικών πόρων ενός κέντρου δεδομένων
– Εξυπηρετητές σε κέντρα δεδομένων μπορούν να φιλοξενούν πάνω από 
100 εικονικές μηχανές
• Υλικό ευρείας χρήσης:
– Τα κέντρα δεδομένων απαρτίζονται από (συνήθως ομογενές) υλικό 
ευρείας χρήσης και σχετικά χαμηλού κόστους (commodity hardware)
Χαρακτηριστικά Σύγχρονων Κέντρων Δεδομένων
• Απόδοση εφαρμογών:
– Γρήγορη εκτέλεση εργασιών (π.χ. ελαχιστοποίηση του χρόνου 
ολοκλήρωσης των εργασιών)
• Κατανάλωση ενέργειας:
– Μείωση της κατανάλωσης ενέργειας μέσω της συγκέντρωσης του 
υπολογιστικού φορτίου σε ένα μικρό αριθμό εξυπηρετητών (π.χ. μέσω 
της χρήσης εικονικών μηχανών)
– Οι υπόλοιποι εξυπηρετητές μπορούν να τεθούν εκτός λειτουργίας ή σε 
λειτουργία με μειωμένη κατανάλωση ενέργειας
Στόχοι Λειτουργίας Κέντρων Δεδομένων (1)
• Διαχειρισιμότητα:
– Εύκολη διαχείριση συσκευών και υπηρεσιών
• Αξιοπιστία:
– Αποφυγή σφαλμάτων κατά την εκτέλεση εργασιών
– Ταχεία ανάκαμψη από σφάλματα όποτε προκύπτουν
• Κλιμακωσιμότητα:
– Παροχή υποστηριζόμενων υπηρεσιών σε ευρύτερη κλίμακα 
αξιοποιώντας το υπάρχον υλικό ή νέο υλικό που θα προστεθεί
Στόχοι Λειτουργίας Κέντρων Δεδομένων (2)
• Το δίκτυο συνδέει τους εξυπηρετητές του κέντρου δεδομένων
• Πολλές εφαρμογές απαρτίζονται από εργασίες που εκτελούνται σε 
διαφορετικούς εξυπηρετητές
– Συνήθως απαιτείται η αποστολή δεδομένων από έναν εξυπηρετητή σε 
ένα άλλο μετά την ολοκλήρωση της κάθε εργασίας
– Η ταχύτητα μεταφοράς των δεδομένων από το δίκτυο έχει άμεσο 
αντίκτυπο στο ρυθμό ολοκλήρωσης των εργασιών
Δίκτυο Κέντρου Δεδομένων
Δίκτυο Κέντρου 
Δεδομένων
Δίκτυο Κέντρου Δεδομένων
• Ζητούμενο:
– Υψηλή ταχύτητα μεταφοράς δεδομένων μεταξύ των εξυπηρετητών 
ανεξαρτήτως της μορφής επικοινωνίας
Ιεραρχική Τοπολογία Δικτύου Κέντρου Δεδομένων
• Μεταγωγή (switching) σε τρία επίπεδα:
– Ικρίωμα (rack)
– Συνάθροιση (aggregation)
– Ρίζα (root)
Aggregation 
Switches
Root Switches
Top of the Rack 
(ToR)
Switches
. . . . . . . . . . . . . . .
. . . . . . . . .
Ερωτήσεις;
Κέντρα Δεδομένων
Υπολογιστική Νέφους
Παναγιώτης Παπαδημητρίου
• To Flickr έχει πάνω από 8 δισεκατομμύρια φωτογραφίες
• Το eBay έχει πάνω από 6.5 petabyte δεδομένα χρηστών
• Το CERN παράγει περίπου 15 petabyte δεδομένα / έτος
• Το 2008 η Google επεξεργάστηκε 20 petabyte / μέρα
• Η Google σχεδιάζει να παρέχει δυνατότητα 
αποθήκευσης δεδομένων 1 exabyte
• To κέντρο δεδομένων της NSA στη Utah φημολογείται 
ότι έχει αποθηκευμένα 5 zettabyte
– 1 zettabyte = 1021 bytes (ισοδυναμεί με μία στοίβα 
σκληρών δίσκων 1TB ύψους 25400 km!)
Δεδομένα προς Επεξεργασία
25400 km
• Κανείς υπολογιστής δεν διαθέτει την απαιτούμενη ισχύ για την 
επεξεργασία τόσο μεγάλου όγκου δεδομένων
– Απαιτούνται πολλοί υπολογιστές
• Σύνολα εξυπηρετητών για τις ανάγκες υπηρεσιών:
– To 2010 το Facebook χρησιμοποιούσε 60.000 εξυπηρετητές
– Η Akamai έχει 95.000 εξυπηρετητές σε 71 χώρες
– Το 2008 η Microsoft χρησιμοποιούσε 200.000 εξυπηρετητές
– Η Google φημολογείται ότι έχει πάνω από 1 εκατομμύριο 
εξυπηρετητές (με απώτερο στόχο να φτάσει τα 10 εκατομμύρια)
Υπολογιστική Ισχύς
Συστοιχίες (Clusters)
• Οι συστοιχίες απαρτίζονται από συνήθως ομοιογενές υλικό 
(εξυπηρετητές με ίδιες τεχνικές προδιαγραφές) και ανήκουν σε έναν 
οργανισμό (π.χ. πανεπιστήμιο, τράπεζα, επιχείρηση)
Εξυπηρετητής
Μονάδες αποθήκευσης
Μεταγωγέας (switch) 
για τη σύνδεση των 
εξυπηρετητών 
σε κάθε ικρίωμα 
Ικρίωμα 
(rack)
• Οι συστοιχίες έχουν σημαντική κατανάλωση ενέργειας
– Αν κάθε εξυπηρετητής καταναλώνει 140 W
– Ένα ικρίωμα με 32 εξυπηρετητές καταναλώνει 4.5 kW
– Μεγάλο ποσό αυτής της ενέργειας μετατρέπεται σε θερμότητα
• Οι συστοιχίες χρειάζονται ψύξη
– Επιπλέον κατανάλωση ενέργειας για την ψύξη κάθε ικριώματος 
σε μία συστοιχία
Κατανάλωση Ενέργειας
Κλιμάκωση Υπολογιστικής Ισχύος
PC Εξυπηρετητής Συστοιχία
• Αν η υπολογιστική ισχύ μίας συστοιχίας δεν είναι αρκετή (και δεν μπορεί να 
επεκταθεί π.χ. λόγω έλλειψης χώρου):
• Στέγαση εξυπηρετητών σε ξεχωριστό κτίριο
• Περισσότερα ικριώματα και συνεπώς μεγαλύτερη υπολογιστική ισχύς
• Περισσότερη κατανάλωση ενέργειας και ανάγκη για καλύτερη ψύξη
• Αποτέλεσμα: Κέντρο δεδομένων
Κέντρο δεδομένων 
(Datacenter)
• Ένα μεγάλο κέντρο δεδομένων μπορεί να στεγάσει 10.000 
ικριώματα και πάνω από 100.000 εξυπηρετητές
Κέντρα Δεδομένων
Κέντρο δεδομένων της Google στο Oregon
Κέντρα 
δεδομένων
Μονάδα ψύξης
Εσωτερικό Κέντρου Δεδομένων
• Ευρείας έκτασης δίκτυο για τη διασύνδεση των χιλιάδων 
εξυπηρετητών
Εσωτερικό Κέντρου Δεδομένων
• Δίκτυο ηλεκτροδότησης για έκτακτη ανάγκη
Εσωτερικό Κέντρου Δεδομένων
• Σύστημα ψύξης
Εσωτερικό Κέντρου Δεδομένων
• Τα κέντρα δεδομένα συνήθως χτίζονται σε περιοχές με φθηνό 
ηλεκτρικό ρεύμα
• Παραδείγματα κόστους ηλεκτροδότησης στην Αμερική:
– Idaho: 3.6 cent / KWh (κοντά σε υδροηλεκτρικό εργοστάσιο)
– California: 10 cent / KWh
– Hawaii: 18 cent / KWh
Κατανάλωση Ενέργειας σε Κέντρα Δεδομένων
Εταιρεία Εξυπηρετητές Ενέργεια Κόστος
eBay 16K ~0.6*105 MWh ~$3.7M / έτος
Akamai 40K ~1.7*105 MWh ~$10M / έτος
Rackspace 50K ~2*105 MWh ~$12M / έτος
Microsoft >200K >6*105 MWh >$36M / έτος
Google >500K >6.3*105 MWh >$38M / έτος
Στοιχεία από το 2009
Δίκτυα Κέντρων Δεδομένων
Δίκτυο Κέντρου 
Δεδομένων
Δίκτυο Κέντρου Δεδομένων
• Ζητούμενο:
– Υψηλή ταχύτητα μεταφοράς δεδομένων μεταξύ των εξυπηρετητών 
ανεξαρτήτως της μορφής επικοινωνίας
Ιεραρχική Τοπολογία Δικτύου Κέντρου Δεδομένων
• Μεταγωγή (switching) σε τρία επίπεδα:
– Ικρίωμα (rack)
– Συνάθροιση (aggregation)
– Ρίζα (root)
Aggregation 
Switches
Root Switches
Top of the Rack 
(ToR)
Switches
. . . . . . . . . . . . . . .
. . . . . . . . .
Υπερκάλυψη Δικτύου Κέντρου Δεδομένων
• Βαθμός υπερκάλυψης (O) ενός δικτύου κέντρου δεδομένων:
– Η αναλογία του συνολικού bandwidth (B) των συνδέσεων των root 
switches προς το συνολικό bandwidth των εξυπηρετητών (N x B)
– Συνήθως κυμαίνεται από 2.5:1 έως 8:1 (ανάλογα με τον τρόπο 
επικοινωνίας των εξυπηρετητών)
N εξυπηρετητές
B B B B
B * N / O B * N / O
N εξυπηρετητές N εξυπηρετητές N εξυπηρετητές
• Πολλές εναλλακτικές διαδρομές ίσου κόστος (Equal Cost Multiple Paths -
ECMP)
Τοπολογία Clos
• Πολλές εναλλακτικές διαδρομές ίσου κόστος (Equal Cost Multiple Paths -
ECMP)
Τοπολογία Clos
• Πολλές εναλλακτικές διαδρομές ίσου κόστος (Equal Cost Multiple Paths -
ECMP)
Τοπολογία Clos
• Πολλές εναλλακτικές διαδρομές ίσου κόστος (Equal Cost Multiple Paths -
ECMP)
Τοπολογία Clos
• Βασίζεται στην τοπολογία Clos:
– (k/2)2 root switches με k θύρες το καθένα
– k pods, το καθένα με δύο στρώματα από k/2 switches και k
2
/4 
εξυπηρετητές
– k
3
/4 εξυπηρετητές συνολικά
Τοπολογία Fat-Tree
• Βασίζεται στην τοπολογία Clos:
– (k/2)2 root switches με k θύρες το καθένα
– k pods, το καθένα με δύο στρώματα από k/2 switches και k
2
/4 
εξυπηρετητές
– k
3
/4 εξυπηρετητές συνολικά
Τοπολογία Fat-Tree
• Βασίζεται στην τοπολογία Clos:
– (k/2)2 root switches με k θύρες το καθένα
– k pods, το καθένα με δύο στρώματα από k/2 switches και k
2
/4 
εξυπηρετητές
– k
3
/4 εξυπηρετητές συνολικά
Τοπολογία Fat-Tree
• Βασίζεται στην τοπολογία Clos:
– (k/2)2 root switches με k θύρες το καθένα
– k pods, το καθένα με δύο στρώματα από k/2 switches και k
2
/4 
εξυπηρετητές
– k
3
/4 εξυπηρετητές συνολικά
Τοπολογία Fat-Tree
• Βασίζεται στην τοπολογία Clos:
– (k/2)2 root switches με k θύρες το καθένα
– k pods, το καθένα με δύο στρώματα από k/2 switches και k
2
/4 
εξυπηρετητές
– k
3
/4 εξυπηρετητές συνολικά
Τοπολογία Fat-Tree
Βασικά Δικτυακά Πρωτόκολλα
• Συσκευές συνδέονται στο δίκτυο μέσω θυρών (ports)
• Σε κάθε θύρα αντιστοιχίζεται μία μοναδική διεύθυνση IP
– IPv4 διευθύνσεις: 32-bits (4 τμήματα από 8 bits: A.B.C.D) 
– Συσκευές με πολλαπλές θύρες, χρησιμοποιούν διαφορετική διεύθυνση 
IP για κάθε θύρα
• Κάθε θύρα έχει επιπλέον μία μοναδική φυσική διεύθυνση (MAC 
address):
– φυσικές διευθύνσεις: 48 bits (π.χ. 84-2B-2B-A5-A5-77) 
Διευθύνσεις Δικτύου
10.10.10.1 20.20.20.1
10.10.10.250 20.20.20.250
• Οι διευθύσεις IP μπορούν να εκχωρηθούν στατικά ή δυναμικά:
– Στατική ανάθεση: Ο διαχειριστής ορίζει σε ένα τερματικό μία διεύθυνση 
IP από το χώρο διευθύνσεων που του έχει εκχωρηθεί από τον Πάροχο
– Δυναμική ανάθεση: Το τερματικό λαμβάνει αυτόματα μία διεύθυνση IP 
μέσω του Dynamic Host Configuration Protocol (DHCP) 
Εκχώρηση Διευθύνσεων IP
DHCP Εξυπηρετητής
Εκχώρηση Διευθύνσεων IP με το DHCP
Τερματικό 
(Η/Υ, laptop, κτλ)
DHCP 
Εξυπηρετητής
Εκχώρηση Διευθύνσεων IP με το DHCP
Τερματικό 
(Η/Υ, laptop, κτλ)
DHCP 
Εξυπηρετητής
Εκχώρηση Διευθύνσεων IP με το DHCP
Τερματικό 
(Η/Υ, laptop, κτλ)
DHCP 
Εξυπηρετητής
διεύθυνση IP
μάσκα υποδικτύου
διεύθυνση πύλης
DHCP εξυπηρετητής (ές)
περίοδος χρήσης
Εκχώρηση Διευθύνσεων IP με το DHCP
Τερματικό 
(Η/Υ, laptop, κτλ)
DHCP 
Εξυπηρετητής
διεύθυνση IP
μάσκα υποδικτύου
διεύθυνση πύλης
DHCP εξυπηρετητής (ές)
περίοδος χρήσης
Εκχώρηση Διευθύνσεων IP με το DHCP
Τερματικό 
(Η/Υ, laptop, κτλ)
DHCP 
Εξυπηρετητής
διεύθυνση IP
μάσκα υποδικτύου
διεύθυνση πύλης
DHCP εξυπηρετητής (ές)
περίοδος χρήσης
• Για την προώθηση ενός πακέτου IP χρειάζονται:
– Η διεύθυνση IP της θύρας του επόμενου switch, που είναι 
αποθηκευμένη στον πίνακα προώθησης
– Η φυσική διεύθυση της θύρας του επόμενου switch
Αναζήτηση Φυσικής Διεύθυνσης
1 2 1 2
Switch A Switch B
(IP, MAC???)
IP Header Payload
Frame Header IP Header Payload
Ενθυλάκωση πακέτου IP
• Το πρωτόκολλο ARP αναλαμβάνει την αναζήτηση φυσικών 
διευθύνσεων κατά την προώθηση πακέτων:
– Διατηρεί πίνακες σε switches με αντιστοιχίσεις IP και φυσικών 
διευθύνσεων
– Κάθε καταχώρηση αφαιρείται από τον πίνακα μετά το πέρας 
ενός χρονικού διαστήματος (TTL)
Address Resolution Protocol (ARP)
IP Address Physical Address TTL
172.23.180.137 84-2B-2B-A5-A5-77 13:45:00
172.23.42.42 70-F3-95-3D-14-04 11:12:00
• Όταν ένα switch αναζητά μια φυσική διεύθυνση:
– Εκτελεί μία αναζήτηση στον πίνακα ARP με βάση τη διεύθυνση IP
– Αν δεν υπάρχει η καταχώρηση στον πίνακα: 
• εκπέμπεται ένα μήνυμα (ARP query) στο δίκτυο
• ο δρομολογητής που έχει τη διεύθυνση IP απαντά με ένα άλλο 
μήνυμα (ARP response) όπου γνωστοποιεί τη φυσική του 
διεύθυνση
– Το ζεύγος φυσικής και IP διεύθυνσης προστίθεται στον πίνακα 
ARP του switch που ξεκίνησε την αναζήτηση
Address Resolution Protocol (ARP)
• Το spanning tree εξαλείφει βρόχους από μία τοπολογία:
– Απενεργοποιεί συγκεκριμένες θύρες switches
– Διατηρεί όλους τους κόμβους στην τοπολογία
Spanning Tree
Spanning tree
Αρχιτεκτονική Δικτύου Portland
• Μεγάλοι πίνακες δρομολόγησης:
– Το μέγεθος του πίνακα δρομολόγησης στα switches είναι ανάλογο του 
αριθμού των εξυπηρετητών λόγω της έλλειψης ιεραρχίας στη 
διευθυνσιοδότηση σε επίπεδο MAC
• Κίνηση δικτύου λόγω εκπομπής (broadcast):
– Οι εκπομπές ARP και DHCP καταναλώνουν bandwidth και 
υπολογιστικούς πόρους από τους εξυπηρετητές και τα switches
• Spanning trees:
– Τα spanning trees σπαταλούν σημαντικό μέρος του bandwidth
– Επιβαρύνουν τις συνδέσεις του switch που έχει επιλεγεί ως root από τον 
αλγόριθμο σχηματισμού του spanning tree
Περιορισμοί Ethernet σε Κέντρα Δεδομένων
Περιορισμοί Spanning Tree
• To πρωτόκολλο σχηματισμού spanning tree:
– Χρησιμοποιεί μόνο ένα μικρό αριθμό συνδέσεων, οπότε ένα μεγάλο 
μέρος του διαθέσιμου bandwidth παραμένει αναξιοποίητο
– Απαιτεί ισχυρούς (και ακριβούς) root switches
• To πρωτόκολλο σχηματισμού spanning tree:
– Χρησιμοποιεί μόνο ένα μικρό αριθμό συνδέσεων, οπότε ένα μεγάλο 
μέρος του διαθέσιμου bandwidth παραμένει αναξιοποίητο
– Απαιτεί ισχυρούς (και ακριβούς) root switches
Περιορισμοί Spanning Tree
Root
Αρχιτεκτονική Δικτύου Portland
• Το PortLand είναι μια αρχιτεκτονική για δίκτυα στρώματος-2, πολύ μεγάλης 
κλίμακας
• Μπορεί να υποστηρίξει έως και εκατομμύρια (εικονικούς) εξυπηρετητές
• Το Portland διαχωρίζει την ταυτότητα από τη θέση του κάθε εξυπηρετητή:
– Χρησιμοποιεί διευθύνσεις IP για την ταυτοποίηση των εξυπηρετητών
– Εισάγει τις διευθύνσεις pseudo-MAC (PMAC) για την κωδικοποίηση της 
θέσης των εξυπηρετητών
• Το PortLand δεν χρειάζεται καμία τροποποίηση στους εξυπηρετητές (σε 
αντίθεση με τα switches, όπου απαιτούνται κάποιες πρόσθετες λειτουργίες)
Pod 0 Pod 1 Pod 2 Pod 3
Τοπολογία Δικτύου
• Η αρχιτεκτονική Portland έχει εφαρμογή σε ιεραρχικές τοπολογίες κέντρων 
δεδομένων
– π.χ. τοπολογίες fat-tree
Διευθύνσεις Pseudo MAC (PMAC)
• Το Portland χρησιμοποιεί διευθύνσεις PMAC για τη δρομολόγηση των 
πακέτων στο δίκτυο:
– Πέρα από διευθύνσεις IP και MAC, σε κάθε εξυπηρετητή εκχωρούνται 
και διευθύνσεις PMAC
– Η διεύθυνση PMAC αντιπροσωπεύει τη θέση του εξυπηρετητή στο 
δίκτυο
• Μορφή διεύθυνσης PMAC: pod.position.port.vmid
– pod: αριθμός pod στον οποίο συνδέεται ο εξυπηρετητής (16 bits)
– position: θέση του switch (όπου συνδέεται ο εξυπηρετητής) στο pod 
(8 bits)
– port: αριθμός θύρας του switch (8 bits)
– vmid: virtual machine ID (16 bits)
PMAC: 00-00-01-03-00-01
1 2
Pod 0 Switch VM 1
θέση 1
Switch 
θύρα 3
0 1 0 1 0 1 0 1
Pod 0 Pod 1 Pod 2 Pod 3
Παράδειγμα PMAC
PMAC: 00-00-01-03-00-01
1 2
Pod 0 Switch VM 1
θέση 1
Switch 
θύρα 3
1
0
2
3
Pod 0 Pod 1 Pod 2 Pod 3
Παράδειγμα PMAC
Επόπτης 
Δικτύου
IP PMAC
172.23.180.137 00-00-01-03-00-00
172.23.192.120 00-02-01-02-00-00
………….. ……………..
Επόπτης Δικτύου
• Ένας κεντρικός Επόπτης Δικτύου αποθηκεύει:
– τις αντιστοιχίσεις (IP, PMAC) συνδράμοντας στην αναζήτηση φυσικών 
διευθύνσεων μέσω του πρωτοκόλλου ARP
– την τοπολογία του δικτύου
Επόπτης 
Δικτύου
IP MAC
172.23.180.137 84-2B-2B-A5-A5-77
Εκχώρηση PMAC
Επόπτης 
Δικτύου
IP MAC
172.23.180.137 84-2B-2B-A5-A5-77
Το switch σχηματίζει την 
PMAC: 00-00-01-03-00-00
Εκχώρηση PMAC
Επόπτης 
Δικτύου
IP MAC
172.23.180.137 84-2B-2B-A5-A5-77
Εκχώρηση PMAC
Το switch σχηματίζει την 
PMAC: 00-00-01-03-00-00
Επόπτης 
Δικτύου
IP MAC
172.23.180.137 84-2B-2B-A5-A5-77
IP PMAC
172.23.180.137 00-00-01-03-00-00
Εκχώρηση PMAC
Επόπτης 
Δικτύου
IP MAC
172.23.180.137 84-2B-2B-A5-A5-77
IP PMAC
172.23.180.137 00-00-01-03-00-00
IP MAC PMAC
172.23.180.137 84-2B-2B-A5-A5-77 00-00-01-03-00-00
Εκχώρηση PMAC
Επόπτης 
Δικτύου
IP MAC
172.23.180.137 84-2B-2B-A5-A5-77
IP PMAC
172.23.180.137 00-00-01-03-00-00
172.23.192.120 00-02-01-02-00-00
IP MAC
172.23.192.120 A3-B4-21-87-D4-12
Θέλει να στείλει πακέτα στην 
IP 172.23.192.120. PMAC;
Αναζήτηση Φυσικής Διεύθυνσης (ARP)
Επόπτης 
Δικτύου
IP PMAC
172.23.180.137 00-00-01-03-00-00
172.23.192.120 00-02-01-02-00-00
IP MAC
172.23.180.137 84-2B-2B-A5-A5-77
IP MAC
172.23.192.120 A3-B4-21-87-D4-12
Στέλνει ένα αίτημα ARP 
για την IP 172.23.192.120
Αναζήτηση Φυσικής Διεύθυνσης (ARP)
Επόπτης 
Δικτύου
IP PMAC
172.23.180.137 00-00-01-03-00-00
172.23.192.120 00-02-01-02-00-00
IP MAC
172.23.180.137 84-2B-2B-A5-A5-77
IP MAC
172.23.192.120 A3-B4-21-87-D4-12
Το switch αναχαιτίζει το αίτημα ARP,
αναλαμβάνοντας την εύρεση της PMAC
Αναζήτηση Φυσικής Διεύθυνσης (ARP)
Επόπτης 
Δικτύου
IP PMAC
172.23.180.137 00-00-01-03-00-00
172.23.192.120 00-02-01-02-00-00
IP MAC
172.23.180.137 84-2B-2B-A5-A5-77
IP MAC
172.23.192.120 A3-B4-21-87-D4-12
Ο επόπτης δικτύου αναζητά 
τη διεύθυνση PMAC
Αναζήτηση Φυσικής Διεύθυνσης (ARP)
Επόπτης 
Δικτύου
IP PMAC
172.23.180.137 00-00-01-03-00-00
172.23.192.120 00-02-01-02-00-00
IP MAC
172.23.180.137 84-2B-2B-A5-A5-77
IP MAC
172.23.192.120 A3-B4-21-87-D4-12
Ο επόπτης δικτύου στέλνει το αντίστοιχο 
ζεύγος (IP, PMAC) στο switch
Αναζήτηση Φυσικής Διεύθυνσης (ARP)
Επόπτης 
Δικτύου
IP PMAC
172.23.180.137 00-00-01-03-00-00
172.23.192.120 00-02-01-02-00-00
IP MAC
172.23.180.137 84-2B-2B-A5-A5-77
IP MAC
172.23.192.120 A3-B4-21-87-D4-12
Το switch γνωστοποιεί την PMAC στον 
εξυπηρετητή που έστειλε το αίτημα
Αναζήτηση Φυσικής Διεύθυνσης (ARP)
Επόπτης 
Δικτύου
IP MAC
172.23.180.137 84-2B-2B-A5-A5-77
IP PMAC
172.23.180.137 00-00-01-03-00-00
172.23.192.120 00-02-01-02-00-00
IP MAC
172.23.192.120 A3-B4-21-87-D4-12
Στέλνει πακέτα με προορισμό IP 
172.23.192.120, PMAC 00-02-01-02-00-00
Δρομολόγηση Πακέτων
Επόπτης 
Δικτύου
IP MAC
172.23.180.137 84-2B-2B-A5-A5-77
IP PMAC
172.23.180.137 00-00-01-03-00-00
172.23.192.120 00-02-01-02-00-00
IP MAC
172.23.192.120 A3-B4-21-87-D4-12
Το switch δρομολογεί τα πακέτα στον 
παραλήπτη με βάση την PMAC
Δρομολόγηση Πακέτων
Επόπτης 
Δικτύου
IP PMAC
172.23.180.137 00-00-01-03-00-00
172.23.192.120 00-02-01-02-00-00
IP MAC
172.23.192.120 A3-B4-21-87-D4-12
Το switch του παραλήπτη αντικαθιστά την PMAC 
με την MAC και στέλνει τα πακέτα στον παραλήπτη
IP MAC PMAC
172.23.192.120 A3-B4-21-87-D4-12 00-02-01-02-00-00
Δρομολόγηση Πακέτων
Αυτοματοποίηση του Προσδιορισμού Θέσης
• Η ανάθεση αριθμών και θέσεων σε switches και pods από κάποιον 
διαχειριστή θα αποτελούσε μία πολύ χρονοβόρα διαδικασία για ένα ευρείας 
κλίμακας δίκτυο (όπως τα περισσότερα κέντρα δεδομένων)
• Το Portland παρέχει μηχανισμούς (πρωτόκολλα) για την αυτοματοποίηση 
αυτής της διαδικασίας
– Ουσιαστικά δίνει τη δυνατότητα διαπραγμάτευσης των στοιχείων αυτών 
μεταξύ των switches
– Χρησιμοποιείται και η συνδρομή του Επόπτη Δικτύου
Αυτοματοποίηση του Προσδιορισμού Θέσης
• Τα switches ανταλλάσουν μεταξύ τους μηνύματα (Location Discovery 
Messages - LDM) 
• Τα switches ανακαλύπτουν τις παρακάτω πληροφορίες σχετικά με τη θέση 
τους:
– Επίπεδο δέντρου: Βάσει του ρόλου κάποιου γειτονικού switch
– Θέση: Προσδιορίζεται με τη συνδρομή των aggregation switches στο 
ίδιο pod
– Αριθμός pod: Προσδιορίζεται με τη συνδρομή του επόπτη δικτύου
Location Discovery Messages (LDM)
• Ένα LDM περιλαμβάνει τα παρακάτω στοιχεία:
– Switch ID: Μοναδικό ID για κάθε switch (π.χ., η μικρότερη διεύθυνση 
MAC από όλες τις θύρες του switch)
– Αριθμός pod: Μοναδικός αριθμός pod που χρησιμοποιείται από κάθε 
switch που ανήκει στο συγκεκριμένο pod
– Θέση (εντός του pod): Μοναδικός αριθμός για κάθε switch εντός του pod
– Επίπεδο δέντρου: Αριθμός που δείχνει αν ένα switch είναι σε επίπεδο 
rack (0), aggregation (1) ή root (2)
– Πάνω/κάτω: 1 bit που δείχνει αν η θύρα ενός switch είναι προς την 
πάνω ή την κάτω πλευρά του δέντρου
Επόπτης 
Δικτύου
Switch ID Αριθμός Pod Θέση Επίπεδο Δέντρου
A0-2B-FB-23-34-01
Πρωτόκολλο Προσδιορισμού Θέσης
Επόπτης 
Δικτύου
Switch ID Αριθμός Pod Θέση Επίπεδο Δέντρου
A0-2B-FB-23-34-01
Πρωτόκολλο Προσδιορισμού Θέσης
Επόπτης 
Δικτύου
Switch ID Αριθμός Pod Θέση Επίπεδο Δέντρου
A0-2B-FB-23-34-01
Πρωτόκολλο Προσδιορισμού Θέσης
Επόπτης 
Δικτύου
Switch ID Αριθμός Pod Θέση Επίπεδο Δέντρου
A0-2B-FB-23-34-01 0
Πρωτόκολλο Προσδιορισμού Θέσης
Επόπτης 
Δικτύου
Switch ID Αριθμός Pod Θέση Επίπεδο Δέντρου
A1-25-EB-23-2A-10
Πρωτόκολλο Προσδιορισμού Θέσης
Επόπτης 
Δικτύου
Switch ID Αριθμός Pod Θέση Επίπεδο Δέντρου
A1-25-EB-23-2A-10
Πρωτόκολλο Προσδιορισμού Θέσης
Επόπτης 
Δικτύου
Switch ID Αριθμός Pod Θέση Επίπεδο Δέντρου
A1-25-EB-23-2A-10 1
Πρωτόκολλο Προσδιορισμού Θέσης
Επόπτης 
Δικτύου
Switch ID Αριθμός Pod Θέση Επίπεδο Δέντρου
B1-25-34-13-2A-10
Πρωτόκολλο Προσδιορισμού Θέσης
Επόπτης 
Δικτύου
Switch ID Αριθμός Pod Θέση Επίπεδο Δέντρου
B1-25-34-13-2A-10
Πρωτόκολλο Προσδιορισμού Θέσης
Επόπτης 
Δικτύου
Switch ID Αριθμός Pod Θέση Επίπεδο Δέντρου
B1-25-34-13-2A-10 2
Πρωτόκολλο Προσδιορισμού Θέσης
Επόπτης 
Δικτύου
Switch ID Αριθμός Pod Θέση Επίπεδο Δέντρου
A0-2B-FB-23-34-01 0
Πρωτόκολλο Προσδιορισμού Θέσης
Επόπτης 
Δικτύου
Switch ID Αριθμός Pod Θέση Επίπεδο Δέντρου
A0-2B-FB-23-34-01 0
Προτείνεται η θέση 0
Πρωτόκολλο Προσδιορισμού Θέσης
Επόπτης 
Δικτύου
Switch ID Αριθμός Pod Θέση Επίπεδο Δέντρου
A0-2B-FB-23-34-01 0
NAI
NAI
Πρωτόκολλο Προσδιορισμού Θέσης
Επόπτης 
Δικτύου
Switch ID Αριθμός Pod Θέση Επίπεδο Δέντρου
A0-2B-FB-23-34-01 0 0
Πρωτόκολλο Προσδιορισμού Θέσης
Επόπτης 
Δικτύου
Switch ID Αριθμός Pod Θέση Επίπεδο Δέντρου
A0-2B-FB-23-34-01 0 0
Πρωτόκολλο Προσδιορισμού Θέσης
Αίτημα για Αριθμό Pod
Επόπτης 
Δικτύου
Switch ID Αριθμός Pod Θέση Επίπεδο Δέντρου
A0-2B-FB-23-34-01 0 0
Pod 0
Πρωτόκολλο Προσδιορισμού Θέσης
Επόπτης 
Δικτύου
Switch ID Αριθμός Pod Θέση Επίπεδο Δέντρου
A0-2B-FB-23-34-01 0 0 0
Πρωτόκολλο Προσδιορισμού Θέσης
Επόπτης 
Δικτύου
Switch ID Αριθμός Pod Θέση Επίπεδο Δέντρου
A0-2B-FB-23-34-01 0 0 0
Πρωτόκολλο Προσδιορισμού Θέσης
Κοινοποίηση Αριθμού Pod
Επόπτης 
Δικτύου
Switch ID Αριθμός Pod Θέση Επίπεδο Δέντρου
A0-2B-FB-23-34-01 0 0 0
Κοινοποίηση Αριθμού Pod
Πρωτόκολλο Προσδιορισμού Θέσης
Αρχιτεκτονική Δικτύου SEATTLE
Πίνακες Κατατεμαχισμού (Hash Tables)
• Οι πίνακες κατατεμαχισμού είναι δομές δεδομένων που διευκολύνουν την 
αναζήτηση εγγραφών τύπου (κλειδί, τιμή) σε (συχνά κατανεμημένες) βάσεις 
δεδομένων:
– Μία (πολλά-προς-ένα) συνάρτηση κατατεμαχισμού (hash function) 
αντιστοιχίζει ονόματα-κλειδιά σε ακέραιους αριθμούς 
– index = h(key)
h(key)
index value
0000 762-2836 
0001 532-1290
0010 514-1698
: :
1111 568-9710
Paul Smith
Nick Johnson
Mary Anderson
key
Κατανεμημένοι Πίνακες Κατατεμαχισμού (DHT)
• Οι κατανεμένοι πίνακες κατατεμαχισμού (distributed hash tables – DHT)
επιτρέπουν την αποθήκευση και αναζήτηση ενός πολύ μεγάλου αριθμού 
από ζεύγη (κλειδί, τιμή): 
– Αυτό επιτυγχάνεται με την κατανομή των ζευγών μεταξύ πολλών 
κόμβων (π.χ. Η/Υ)
– Έχουν πολλές εφαρμογές, όπως στα δίκτυα peer-to-peer (π.χ. 
BitΤorrent)
• Βασικοί στόχοι ενός DHT:
– Ομοιόμορφη κατανομή των ζευγών (κλειδί, τιμή) μεταξύ ενός μεγάλου 
αριθμού κόμβων
– Ταχεία αναζήτηση της τιμής που αντιστοιχεί σε ένα κλειδί
Κατανεμημένοι Πίνακες Κατατεμαχισμού (DHT)
Internet
hash
0101 P4
foo.cpp
accounts
exercise1
όνομα αρχείου
1001 P2
0110 P5
key value
P1
P2 P3
P4
P5
Πώς θα πρέπει να 
κατανεμηθούν τα 
κλειδιά μεταξύ των 
κόμβων;
Κυκλικοί DHT
• Οργάνωση των κόμβων σε μορφή δακτυλίου (overlay δίκτυο)
• Αντιστοίχιση κλειδιών σε κόμβους:
– Ακέραιοι αριθμοί για την αναπαράσταση κλειδιών και κόμβων, με το ίδιο 
εύρος
– N-bit ακέραιοι: κλειδιά και κόμβοι με IDs ϵ [0, 2n – 1])
– Ανάθεση κάθε κλειδιού στον πλησιέστερο κόμβο
– Αν κάποιο κλειδί δεν συμπίπτει με κάποιο κόμβο (επειδή τυχγάνει 
να μην υπάρχει κόμβος με το ίδιο ID), τότε το κλειδί ανατίθεται στον 
επόμενο διαθέσιμο κόμβο 
• Παράδειγμα ανάθεσης κλειδιών:
– Διαθέσιμοι κόμβοι (n = 4): 1, 3, 5, 7, 8, 11, 14, 15
– Το κλειδί 4 ανατίθεται στον κόμβο 5
– Το κλειδί 9 ανατίθεται στον κόμβο 11
Κατανομή Κλειδιών σε Κυκλικούς DHT
Κλειδί
0000
0111
1100
1111
1110 0011
0101
1000
1010
1001
0010
0100
0110
0001
1011
1101
Κόμβος
Αναζήτηση Κλειδιού σε DHT
0000
0111
1100
1111
1110 0011
0101
1000
Αναζήτηση
κλειδιού 1100
1010
1001
0010
0100
0110
0001
1011
1101
Κόμβος
Κλειδί
Αναζήτηση Κλειδιού σε DHT
0000
0111
1100
1111
1110 0011
0101
1000
Αναζήτηση
κλειδιού 1100
1010
1001
0010
0100
0110
0001
1011
1101
Κόμβος
Κλειδί
Αναζήτηση Κλειδιού σε DHT
0000
0111
1100
1111
1110 0011
0101
1000
Αναζήτηση
κλειδιού 1100
1010
1001
0010
0100
0110
0001
1011
1101
Κόμβος
Κλειδί
Αναζήτηση Κλειδιού σε DHT
0000
0111
1100
1111
1110 0011
0101
1000
Αναζήτηση
κλειδιού 1100
1010
1001
0010
0100
0110
0001
1011
1101
Κόμβος
Κλειδί
Αναζήτηση Κλειδιού σε DHT
0000
0111
1100
1111
1110 0011
0101
1000
Αναζήτηση
κλειδιού 1100
1010
1001
0010
0100
0110
0001
1011
1101
Κόμβος
Κλειδί
Αναζήτηση Κλειδιού σε DHT
0000
0111
1100
1111
1110 0011
0101
1000
Αναζήτηση
κλειδιού 1100 Εύρεση κόμβου με
το κλειδί 1100
O(N) μηνύματα
για N κόμβους
1010
1001
0010
0100
0110
0001
1011
1101
Κόμβος
Κλειδί
Αναζήτηση Κλειδιού σε DHT με 2 Συνδέσεις
0000
0111
1100
1111
1110 0011
0101
1010
1001
0010
0100
0110
0001
1011
1101
Κόμβος
Κλειδί
Αναζήτηση
κλειδιού 1100
Αναζήτηση Κλειδιού σε DHT με 2 Συνδέσεις
0000
0111
1100
1111
1110 0011
0101
1010
1001
0010
0100
0110
0001
1011
1101
Κόμβος
Κλειδί
Αναζήτηση
κλειδιού 1100
Αναζήτηση Κλειδιού σε DHT με 2 Συνδέσεις
0000
0111
1100
1111
1110 0011
0101
1010
1001
0010
0100
0110
0001
1011
1101
Κόμβος
Κλειδί
Αναζήτηση
κλειδιού 1100
Αναζήτηση Κλειδιού σε DHT με 2 Συνδέσεις
0000
0111
1100
1111
1110 0011
0101
1010
1001
0010
0100
0110
0001
1011
1101
Κόμβος
Κλειδί
Αναζήτηση
κλειδιού 1100 Εύρεση κόμβου με
το κλειδί 1100
O(N/2) μηνύματα
για N κόμβους
Συνδέσεις σε Κυκλικούς DHT
• Μικρός αριθμός συνδέσεων ανά κόμβο:
– μειώνει τον όγκο πληροφορίας για τη 
δρομολόγηση στο DHT
– αυξάνει το χρόνο αναζήτησης κλειδιού
• Μεγάλος αριθμός συνδέσεων ανά κόμβο:
– μειώνει το χρόνο αναζήτησης κλειδιού
– αυξάνει τον όγκο πληροφορίας για τη 
δρομολόγηση στο DHT
• Μελέτες (Chord) προτείνουν τη χρήση logN
συνδέσεων, ως μέση λύση
Αρχιτεκτονική Δικτύου SEATTLE
• Επίπεδο (flat) δίκτυο αρχιτεκτονικής Ethernet:
– Η δρομολόγηση γίνεται με βάση τις διευθύνσεις MAC
• Βασικές λειτουργίες του δικτύου με τη χρήση συναρτήσεων hash:
– Η κάθε βασική λειτουργία εκτελείται με τη βοήθεια ενός switch
– Τα switches συνδράμουν στην αναζήτηση τη θέσης ή/και τη διεύθυνσης 
των εξυπηρετητών του δικτύου 
• To SEATTLE εισάγει τροποποιήσεις μόνο στα switches:
– Δεν χρειάζεται καμία τροποποίηση στους εξυπηρετητές του δικτύου
Βασικοί Στόχοι του SEATTLE
• Διατήρηση των προτερημάτων της αρχιτεκτονικής Ethernet:
– Απλότητα στη διαχείριση του δικτύου
– Μετακίνηση τερματικών χωρίς την αλλαγή διεύθυνσης IP
• Αποφυγή της εκπομπής (broadcast) πακέτων για λειτουργίες, όπως:
– Αναζήτηση φυσικής διεύθυνσης με το πρωτόκολλο ARP
– Αυτόματης εκχώρησης διεύθυνσης IP με το πρωτόκολλο DHCP
• Μείωση του μεγέθους του πίνακα δρομολόγησης στα switches
Λειτουργία SEATTLE
Εγγραφή νέου 
τερματικού στο 
δίκτυο
B
D
x
y
Hash
(F(x) = B)
Αποθήκευση
<x, A> στο B
Αποστολή 
προς x
Hash
(F(x) = B)
Αποστολή προς A
Παράδοση στο x
Switch
Εξυπηρετητής
Ροή Ελέγχου
Ροή δεδομένων
Ενημέρωση
<x, A> στο D
E
Χρήση της συντομότερης διαδρομής,
C απευθείας από το D στο A
A
Αποστολή
προς το B
Διαχείριση Μετακίνησης Τερματικών 
Ενδιάμεσος (για το x)
x
y
B
A
Αποστολέας
< x, A >
< x, A >
< x, A >
D
Όταν χρησιμοποιείται η
πιο σύντομη διαδρομή
G
< x, G >
Παραλήπτης
Νέα θέση 
παραλήπτη
< x, G >
< x, G >
< x, G >
Διαχείριση Αιτημάτων ARP
1. Εγγραφή
τερματικού
2. Υπολογισμός
F(IPa) = ra
3. Αποθήκευση
(IPa ,maca ,sa)
4. Broadcast 
αίτημα ARP
προς a
5. Υπολογισμός
F(IPa) = ra
Switch
Εξυπηρετητής
Μηνύματα ελέγχου
Μηνύματα ARP
sa
a
b
ra
sb
6. Unicast 
αίτημα ARP
προς ra
7. Unicast απάντηση ARP
(IPa , maca ,sa)
(IPa ,maca)
Διαχείριση Αιτημάτων DHCP
1. Εγγραφή
τερματικού
2. Υπολογισμός
F(macd) = r
3. Αποθήκευση
(macd ,sd)
4. Broadcast
αίτημα DHCP
5. Υπολογισμός
F(0xDHCP) = r
Switch
Εξυπηρετητής
Μηνύματα ελέγχου
Μηνύματα DHCP
sd
d
h
r
sh
6. Αίτημα DHCP 
προς r
DHCP εξυπηρετητής
(macd=0xDHCP)
7. Αίτημα DHCP
προς sd
8. Παράδοση DHCP 
αιτήματος στο d
Μέγεθος Πίνακα Δρομολόγησης
Εξισορρόπιση Φορτίου 
σε Δίκτυα Κέντρων Δεδομένων
S D
ECMP (Equal Cost Multiple Paths)
• Στατική εξισορρόπιση φορτίου με το ECMP
– Ανάθεση διαδρομών του δικτύου σε δικτυακές ροές
– Εφαρμόζεται συνάρτηση hash σε συνδυασμό πεδίων επικεφαλίδας 
του κάθε πακέτου (π.χ. διευθύνσεις IP, αριθμοί θύρας)
– Η θύρα εξόδου προκύπτει από την εφαρμογή του Modulo-N στην 
έξοδο της hash (όπου N ο αριθμός των επόμενων κόμβων), δηλ.
port = hash(packet) mod N
S D
ECMP (Equal Cost Multiple Paths)
• Στατική εξισορρόπιση φορτίου με το ECMP
– Ανάθεση διαδρομών του δικτύου σε δικτυακές ροές
– Εφαρμόζεται συνάρτηση hash σε συνδυασμό πεδίων επικεφαλίδας 
του κάθε πακέτου (π.χ. διευθύνσεις IP, αριθμοί θύρας)
– Η θύρα εξόδου προκύπτει από την εφαρμογή του Modulo-N στην 
έξοδο της hash (όπου N ο αριθμός των επόμενων κόμβων), δηλ.
port = hash(packet) mod N
S D
ECMP (Equal Cost Multiple Paths)
• Στατική εξισορρόπιση φορτίου με το ECMP
– Ανάθεση διαδρομών του δικτύου σε δικτυακές ροές
– Εφαρμόζεται συνάρτηση hash σε συνδυασμό πεδίων επικεφαλίδας 
του κάθε πακέτου (π.χ. διευθύνσεις IP, αριθμοί θύρας)
– Η θύρα εξόδου προκύπτει από την εφαρμογή του Modulo-N στην 
έξοδο της hash (όπου N ο αριθμός των επόμενων κόμβων), δηλ.
port = hash(packet) mod N
S1 S2 S3 D2 S4 D1 D4 D3
• Συγκρούσεις πακέτων που ανήκουν σε ροές με μεγάλο όγκο 
δεδομένων (elephant flows)
Συγκρούσεις Πακέτων
S1 S2 S3 D2 S4 D1 D4 D3
Συγκρούσεις Πακέτων
• Σπατάλη 61% του διαθέσιμου εύρους ζώνης (στις συνδέσεις από τα 
root switches) σε δίκτυο με 27Κ εξυπηρετητές
Υπολογισμός
Απαιτήσεων Ροών
Ανάθεση 
Διαδρομών
Προσδιορισμός
Ροών Elephant
Δυναμική Εξισορρόπηση Φορτίου (Hedera)
• Βήμα 1: Προσδιορισμός ροών elephant
– Ροές που έχουν σημαντικές απαιτήσεις εύρους ζώνης αλλά 
περιορίζονται από το δίκτυο
• Βήμα 2: Υπολογισμός απαιτήσεων ροών
• Βήμα 3: Ανάθεση ροών
– Ανάθεση διαδρομών του δικτύου σε ροές elephant με βάση τις 
απαιτήσεις των ροών (όπως υπολογίστηκαν στο Βήμα 2)
115
Προσδιορισμός Ροών Elephant
• Περιοδική καταγραφή των τιμών στους μετρητές των switches
– Ροές που υπερβαίνουν κάποιο προκαθορισμένο όριο (bps) θεωρούνται 
elephant
– > %10 της χωρητικότητας των συνδέσεων (π.χ., > 100Mbps)
• Οι ροές με μικρό όγκο δεδομένων (mice) κατανέμονται στο δίκτυο με βάση 
το ECMP
116
Υπολογισμός Απαιτήσεων Ροών
• Με βάση ενός πίνακα ροών, υπολογίζεται η απαίτηση της κάθε ροής στον 
αποστολέα και παραλήπτη επαναληπτικά:
– Ο κάθε αποστολέας κατανέμει το διαθέσιμο bandwidth μεταξύ των 
εξερχόμενων ροών
– Ο κάθε παραλήπτης αναπροσαρμόζει το διαθέσιμο bandwidth μεταξύ 
των εισερχόμενων ροών
– Επανάληψη των παραπάνω βημάτων μέχρι να επέλθει σύγκλιση
• Σύγκλιση σε χρόνο O(|F|) 
A
B
C
X
Y
Ροή Εκτίμηση Σύγκλ;
AX
AY
BY
CY
Αποσ. Διαθέσιμο BW Ροές Αναλογία
A 1 2 1/2
B 1 1 1
C 1 1 1
Αποστολείς
Υπολογισμός Απαιτήσεων Ροών
A
B
C
X
Y
Παραλ. Περιορι
σμός;
Ροές χωρίς 
περιορισμό 
στον αποστ.
Αναλογία
X ΟΧΙ - -
Y ΝΑΙ 3 1/3
Ροή Εκτίμηση Σύγκλ;
AX 1/2
AY 1/2
BY 1
CY 1
Παραλήπτες
Υπολογισμός Απαιτήσεων Ροών
A
B
C
X
Y
Ροή Εκτίμηση Σύγκλ;
AX 1/2
AY 1/3 ΝΑΙ
BY 1/3 ΝΑΙ
CY 1/3 ΝΑΙ
Αποσ. Διαθέσιμο BW Ροές Αναλογία
A 2/3 1 2/3
B 0 0 0
C 0 0 0
Υπολογισμός Απαιτήσεων Ροών
Αποστολείς
A
B
C
X
Y
Παραλ. Περιορι
σμός;
Ροές χωρίς 
περιορισμό 
στον αποστ.
Αναλογία
X ΟΧΙ - -
Y ΟΧΙ - -
Ροή Εκτίμηση Σύγκλ;
AX 2/3 ΝΑΙ
AY 1/3 ΝΑΙ
BY 1/3 ΝΑΙ
CY 1/3 ΝΑΙ
Υπολογισμός Απαιτήσεων Ροών
Παραλήπτες
Στατιστικά Δικτύων Κέντρων Δεδομένων
Δείγμα Κέντρων Δεδομένων
Ρόλος Όνομα Περιοχή Switches Servers
Πανεπιστημιακά EDU1 Κεντρικές ΗΠΑ 22 500
EDU2 Κεντρικές ΗΠΑ 36 1093
EDU3 Κεντρικές ΗΠΑ 1 147
Εταιρικά PRV1 Κεντρικές ΗΠΑ 96 1088
PRV2 Δυτικές ΗΠΑ 100 2000
Υπολογιστικά 
Νέφη
CLD1 Δυτικές ΗΠΑ 562 10K
CLD2 Δυτικές ΗΠΑ 763 15K
CLD3 Ανατολικές ΗΠΑ 612 12K
CLD4 Νότια Αμερική 427 10K
CLD5 Νότια Αμερική 427 10K
Κατανομή Μεγέθους Πακέτου
• Δύο κυρίαρχα μεγέθη πακέτων:
– ~200B (π.χ. keep-alive μηνύματα, πακέτα επιβεβαιώσεων TCP)
– 1400B
Κατανομή Μεγέθους Δικτυακής Ροής (Flow)
• Δικτυακές ροές μικρού μεγέθους:
– 80% των ροών έχουν μέγεθος μικρότερο από 10KB
Μεταφορές Δεδομένων εντός και εκτός Rack
• Κέντρα δεδομένων νεφών:
– Τα περισσότερα δεδομένα μεταφέρονται εντός του rack (70-80%)
• Άλλα είδη κέντρων δεδομένων:
– Το μεγαλύτερο ποσοστό μεταφοράς δεδομένων είναι εκτός του rack (50-
90%)
0
10
20
30
40
50
60
70
80
90
100
EDU1 EDU2 EDU3 PRV1 PRV2 CLD1 CLD2 CLD3 CLD4 CLD5
Extra-Rack
Inter-Rack
Χρήση Εύρους Ζώνης (Bandwidth)
• Χαμηλή αξιοποίηση του bandwidth στο υψηλότερο επίπεδο του 
δικτύου (bandwidth των συνδέσεων από τα root switches)
Βιβλιογραφία
• A. Vahdat et al., Scale-Out Networking in the Data Center, IEEE Micro
2010
• R. Mysore et al., PortLand: A Scalable Fault-Tolerant Layer Data Center 
Network Fabric, ACM SIGCOMM 2009
• I. Stoica, et. al., Chord: A Scalable Peer-to-Peer Lookup Service for 
Internet Applications, ACM SIGCOMM 2001
• C. Kim et al., Floodless in SEATTLE: A Scalable Ethernet Architecture 
for Large Enterprises, ACM SIGCOMM 2008
• T. Benson, et al., Network Traffic Characteristics of Data Centers in the 
Wild, ACM IMC 2010
Ερωτήσεις;
Εικονικοί Εξυπηρετητές και Δίκτυα
Υπολογιστική Νέφους
Παναγιώτης Παπαδημητρίου
Εικονικοί Εξυπηρετητές 
Εξέλιξη Τεχνολογιών Εικονικοποίησης
• Τεχνολογίες εικονικοποίησης πρωτοεμφανίστηκαν το 1960
Εικονικοποίηση (Virtualization)
Υλικό
Εικονική
Μηχανή
Επόπτης (Hypervisor)
Εικονική
Μηχανή
Εικονική
Μηχανή
Εικονική
Μηχανή
• Ο επόπτης εικονικών μηχανών αποσκοπεί στο:
– Να επιτρέπει την παράλληλη λειτουργία πολλών εικονικών 
μηχανών σε ένα υπολογιστή
– Να παρέχει τον αποδοτικό διαμοιρασμό των φυσικών πόρων 
(ΚΜΕ, μνήμη, αποθηκευτικά μέσα) μεταξύ των εικονικών 
μηχανών
– Να διασφαλίζει ότι θα δεν εκχωρούνται σε καμία εικονική μηχανή 
περισσότεροι πόροι από όσοι της αναλογούν (resource 
isolation), ώστε να μην μπορεί μία εικονική μηχανή να «κλέψει» 
πόρους από κάποια άλλη
Επόπτης Εικονικών Μηχανών
• Πλήρης Εικονικοποίηση (Full Virtualization)
– π.χ. KVM, VMWare
• Παραεικονικοποίηση (Paravirtualization)
– π.χ. Xen, Denali
• Εικονικοποίηση Λ/Σ (OS-based Virtualization)
– π.χ. OpenVZ, LXC, Docker
Κατηγορίες Εικονικοποίησης
Πλήρης Εικονικοποίηση
Υλικό
Φιλοξεν. Λ/Σ Φιλοξεν. Λ/Σ Φιλοξεν. Λ/Σ Φιλοξεν. Λ/Σ
Kernel Space
Επόπτης
Εικονικό Υλικό Εικονικό Υλικό Εικονικό Υλικό Εικονικό Υλικό
• Ο επόπτης εξομοιώνει εξολοκλήρου το υλικό του υπολογιστή (π.χ. 
ΚΜΕ, μνήμη, συσκευές Ε/Ε, BIOS) επιτρέποντας την εκτέλεση ενός 
μη τροποποιημένου φιλοξενούμενου Λ/Σ 
• Το κάθε φιλοξενούμενο Λ/Σ έχει την ψευδαίσθηση ότι διαχειρίζεται 
φυσικούς πόρους (και όχι ένα εξομοιωμένο υλικό) 
• Επιτρέπεται στα φιλοξενούμενα Λ/Σ να εκτελούν κλήσεις 
συστήματος
– Οι κλήσεις συστήματος συλλαμβάνονται (traps) από το λογισμικό 
ελέγχου του επόπτη και προσομοιώνονται, αφού τα 
αποτελέσματα κάθε λειτουργίας που εκτελείται σε μία εικονική 
μηχανή δεν επιτρέπεται να τροποποιούν την κατάσταση άλλων 
εικονικών μηχανών 
Πλήρης Εικονικοποίηση
Παραεικονικοποίηση
Υλικό
Επόπτης (Hypervisor)
Φιλοξεν. Λ/Σ Φιλοξεν. Λ/Σ Φιλοξεν. Λ/Σ Φιλοξεν. Λ/Σ
• Αντί να προσομοιώνει επακριβώς το υλικό, ο επόπτης παρέχει σε 
κάθε εικονική μηχανή μία διεπαφή προγραμματισμού (Application 
Programming Interface - API) για την εκτέλεση κλήσεων συστήματος
• Ουσιαστικά οι κλήσεις συστήματος εκτελούνται από τον επόπτη 
(μέσω του API) αντί από τον πυρήνα του φιλοξενούμενου Λ/Σ
– Αυτό απαιτεί τροποποίηση του πυρήνα του Λ/Σ ώστε να μπορεί 
να τοποθετηθεί σε μία εικονική μηχανή, όταν γίνεται χρήση της 
παραεικονικοποίησης
Παραεικονικοποίηση
Εικονικοποίηση Λ/Σ
Υλικό
Περιέκτης
(Χώρος 
εφαρμογών)
Περιέκτης
(Χώρος 
εφαρμογών)
Περιέκτης
(Χώρος 
εφαρμογών)
Περιέκτης
(Χώρος 
εφαρμογών)
Kernel Space
Λ/Σ (πυρήνας)
Στρώμα Eικονικοποίησης Λ/Σ
• Ένα στρώμα εικονικοποίησης επιτρέπει την τμηματοποίηση του Λ/Σ 
σε περιέκτες (containters) και διασφαλίζει τον διαμοιρασμό των 
πόρων μεταξύ των περιεκτών
– Κάθε περιέκτης παρέχει χώρο μόνο για την εκτέλεση εφαρμογών 
(userspace)
– Όλοι οι περιέκτες διαμοιράζονται τον πυρήνα του Λ/Σ (ουσιαστικά 
οι περιέκτες περιορίζονται στον πυρήνα του Λ/Σ)
Εικονικοποίηση Λ/Σ
• Πλήρης Εικονικοποίηση
✓ Δυνατότητα χρήσης διαφορετικών και μη τροποποιημένων Λ/Σ 
✓ Βέλτιστη απομόνωση εικονικών μηχανών (isolation)
 Πτώση της απόδοσης λόγω της προσομοίωσης των κλήσεων 
συστήματος
• Παραεικονικοποίηση
✓ Δυνατότητα χρήσης διαφορετικών Λ/Σ 
✓ Αποδεκτό επίπεδο απομόνωσης εικονικών μηχανών 
 Απαιτείται τροποποίηση του πυρήνα του φιλοξενούμενου Λ/Σ
Σύγκριση Κατηγοριών Εικονικοποίησης (1)
• Εικονικοποίηση Λ/Σ
✓ Υψηλή απόδοση λόγω της άμεσης προσπέλασης του υλικού από 
τον πυρήνα του Λ/Σ
 Μη επαρκής απομόνωση εικονικών μηχανών
 Αδυναμία χρήσης διαφορετικών Λ/Σ 
Σύγκριση Κατηγοριών Εικονικοποίησης (2)
Απόδοση Ευελιξία Απομόνωση
Πλήρης Εικονικοποίηση ● ●●● ●●●
Παραεικονικοποίηση ●● ●● ●●
Εικονικοποίηση Λ/Σ ●●● ● ●
Παραεικονικοποίηση με το Xen
Υλικό
Πυρήνας
Διαχείριση 
Συσκευών &
Εικον. Μηχ.
Dom0
Πυρήνας
Εφαρμογές
DomU
Πυρήνας
DomU
Πυρήνας
DomU
Επόπτης
Εφαρμογές Εφαρμογές
• Ο οδηγός κάρτας δικτύου περιλαμβάνει δύο τμήματα (front-end, back-end)
• Οι διεπαφές front-end και back-end συνδέονται μέσω ειδικών καναλιών 
επικοινωνίας (δημιουργούνται αυτόματα από το Xen)
• Χρειάζεται σύνδεση της back-end διεπαφής με τη φυσική διεπαφή (π.χ. 
μέσω γέφυρας Linux)
Σύνδεση Εικονικών Μηχανών Xen στο Δίκτυο 
Εικονικά Δίκτυα και Συνδέσεις
• Ένα τοπικό δίκτυο μπορεί να διαχωριστεί σε πολλά εικονικά τοπικά δίκτυα 
(Virtual Local Area Networks – VLANs) μέσω του προτύπου IEEE 802.1Q
– Το κάθε VLAN είναι απομονωμένο από τα υπόλοιπα
• To IEEE 802.1Q εισάγει ένα VLAN tag στην επικεφαλίδα του κάθε πλαισίου 
Ethernet
– Κάθε VLAN tag περιέχει ένα μοναδικό ID (12 bits) για κάθε VLAN
Εικονικά Τοπικά Δίκτυα (VLAN)
Destination 
Address
Source 
Address
802.1Q
VLAN Tag
Type/Len Data Frame 
Check
Tag 
Protocol ID
16 bits
User 
Priority
3 bits 
Canonical 
Format Ind. 
1 bit
VLAN ID
12 bits
• Καταλληλότητα των VLANs:
✓ Υποστηρίζονται από τα περισσότερα switches
✓ Κατάλληλα για τα περισσότερα τοπικά δίκτυα (δυνατότητα 
δημιουργίας έως και 4096 ξεχωριστών VLANs)
 Δεν καλύπτουν τις ανάγκες δικτύων ευρείας κλίμακας (π.χ. 
μεγάλα κέντρα δεδομένων) ή γεωγραφικής περιοχής 
Εικονικά Τοπικά Δίκτυα (VLAN)
Όψεις VLAN
Φυσική όψη
Λογική όψη
• Αντιστοίχιση VLAN IDs σε θύρες ενός switch 
– Επιλέγεται ένα ξεχωριστό ID για κάθε VLAN
– Όλες οι θύρες που ανήκουν σε ένα VLAN αντιστοιχίζονται με το ID του 
VLAN
– Το switch διατηρεί ένα πίνακα με αντιστοιχίσεις θυρών και VLAN IDs
Διαμόρφωση ενός VLAN
Switch
VLAN A (ID 1)
1 3 5 7 9 11 13 15 17 19 21 23
2 4 6 8 10 12 14 16 18 20 22 24
VLAN B (ID 2)
• Ξεχωριστή σύνδεση για κάθε VLAN:
– Σπατάλη θυρών σε κάθε switch
– Δυσκολία να γίνουν αλλαγές στη διαμόρφωση (π.χ. προσθήκη ή 
αφαίρεση VLANs απαιτεί αλλαγές στην καλωδίωση μεταξύ των 
switches)
Διαμόρφωση ενός VLAN με περισσότερα Switches
1 3 5 7 9 11 13 15
2 4 6 8 10 12 14 16
1 3 5 7 9 11
2 4 6 8 10 12
• Χρήση ενός trunk link (σύνδεση κορμού):
– Όλα τα πλαίσια (ανεξαρτήτως VLAN ID) προωθούνται στη σύνδεση 
κορμού και φτάνουν στο άλλο switch
– Δεν απαιτούνται αλλαγές στην καλωδίωση κάθε φορά που αλλάζει η 
διαμόρφωση των VLANs
Διαμόρφωση ενός VLAN με περισσότερα Switches
1 3 5 7 9 11 13 15
2 4 6 8 10 12 14 16
1 3 5 7 9 11
2 4 6 8 10 12
trunk link
• Μια εικονική σύνδεση (virtual link), γνωστή και ως σήραγγα (tunnel), συνδέει 
δύο κόμβους (μεταξύ των οποίων συνήθως μεσολαβούν πολλές φυσικές 
συνδέσεις), δημιουργώντας την ψευδαίσθηση ότι οι δύο κόμβοι είναι 
απευθείας συνδεδεμένοι μεταξύ τους
Εικονικές Συνδέσεις
Internet
Virtual link
• Η δημιουργία εικονικών συνδέσεων συνήθως απαιτεί την ενθυλάκωση 
(encapsulation) πακέτων και επιτυγχάνεται μέσω τεχνολογιών, όπως:
– IP-in-IP
– Multi-Protocol Label Switching (MPLS)
– Generic Routing Encapsulation (GRE)
– Ethernet over IP (EtherIP)
Εικονικές Συνδέσεις
• Η τεχνική IP-in-IP ενθυλακώνει πακέτα IP εντός άλλων πακέτων IP (v4 ή 
v6):
✓ Ευρεία υποστήριξη, λόγω της καθολικής διάδοσης του IP
 Επιβάρυνση (overhead) λόγω της ενθυλάκωσης (20 bytes με το IPv4)
IP-in-IP
Επικεφαλίδα IP
Δεδομένα
πακέτο IP
Ενθυλακωμένο
πακέτο IP
Εξωτερική
Επικεφαλίδα IP
Εσωτερική
Επικεφαλίδα IP
Δεδομένα
Επικεφαλίδα IPv4
Protocol 
version
Header
length
Type of 
Service Total length
Identification Flags Fragment offset
Time-to-live Upper-layer 
protocol Header checksum
Source IP address
Destination IP address
Options (if any)
Data
20 bytes
32 bits
Παράδειγμα IP-in-IP
src: 125.12.5.11 dst: 142.10.0.10 payload
IP Tunnel
125.12.5.11
142.10.0.10
165.124.17.2
176.12.129.8
Παράδειγμα IP-in-IP
src: 125.12.5.11 dst: 142.10.0.10 payload
IP Tunnel
125.12.5.11
142.10.0.10
165.124.17.2
176.12.129.8
src: 165.124.17.12 dst: 176.12.198.8 src: 125.12.5.11 dst: 142.10.0.10 payload
Ενθυλάκωση
Παράδειγμα IP-in-IP
src: 125.12.5.11 dst: 142.10.0.10 payload
IP Tunnel
125.12.5.11
142.10.0.10
165.124.17.2
176.12.129.8
src: 165.124.17.12 dst: 176.12.198.8 src: 125.12.5.11 dst: 142.10.0.10 payload
Ενθυλάκωση
src: 165.124.17.12 dst: 176.12.198.8 src: 125.12.5.11 dst: 142.10.0.10 payload
Παράδειγμα IP-in-IP
src: 125.12.5.11 dst: 142.10.0.10 payload
IP Tunnel
125.12.5.11
142.10.0.10
165.124.17.2
176.12.129.8
src: 165.124.17.12 dst: 176.12.198.8 src: 125.12.5.11 dst: 142.10.0.10 payload
Ενθυλάκωση
src: 165.124.17.12 dst: 176.12.198.8 src: 125.12.5.11 dst: 142.10.0.10 payload
Αποθυλάκωση
src: 125.12.5.11 dst: 142.10.0.10 payload
• Η τεχνολογία MPLS ενθυλακώνει πακέτα IP σε πλαίσια (π.χ. Ethernet, PPP)
– Ταχεία αναζήτηση στον πίνακα δρομολόγησης με τη χρήση ενός label 
σταθερού μήκους
– Υποστηρίζεται από τους περισσότερους παρόχους υπηρεσιών 
διαδικτύου (ISPs)
Multi-Protocol Label Switching (MPLS)
• Η τεχνολογία MPLS ενθυλακώνει πακέτα IP σε πλαίσια (π.χ. Ethernet, PPP)
– Ταχεία αναζήτηση στον πίνακα δρομολόγησης με τη χρήση ενός label 
σταθερού μήκους
– Υποστηρίζεται από τους περισσότερους παρόχους υπηρεσιών 
διαδικτύου (ISPs)
Multi-Protocol Label Switching (MPLS)
Επικεφαλίδα IP Δεδομένα
• Η τεχνολογία MPLS ενθυλακώνει πακέτα IP σε πλαίσια (π.χ. Ethernet, PPP)
– Ταχεία αναζήτηση στον πίνακα δρομολόγησης με τη χρήση ενός label 
σταθερού μήκους
– Υποστηρίζεται από τους περισσότερους παρόχους υπηρεσιών 
διαδικτύου (ISPs)
Multi-Protocol Label Switching (MPLS)
Επικεφαλίδα MPLS Επικεφαλίδα IP Δεδομένα
Επικεφαλίδα IP Δεδομένα
Ενθυλάκωση πακέτου IP
• Η τεχνολογία MPLS ενθυλακώνει πακέτα IP σε πλαίσια (π.χ. Ethernet, PPP)
– Ταχεία αναζήτηση στον πίνακα δρομολόγησης με τη χρήση ενός label 
σταθερού μήκους
– Υποστηρίζεται από τους περισσότερους παρόχους υπηρεσιών 
διαδικτύου (ISPs)
Multi-Protocol Label Switching (MPLS)
Ενθυλάκωση πακέτου MPLS 
Επικεφαλίδα MPLS Επικεφαλίδα IP Δεδομένα
Επικεφαλίδα IP Δεδομένα
Επικεφαλίδα Πλαισίου Επικεφαλίδα MPLS Επικεφαλίδα IP Δεδομένα
Ενθυλάκωση πακέτου IP
• Πεδία επικεφαλίδας MPLS:
– Label (20 bits)
– Traffic class για Ποιότητα Παροχής Υπηρεσιών (QoS) (3 bits)
– 1 bit για διαχείριση στοίβας επικεφαλίδων MPLS (η κατώτερη 
επικεφαλίδα στη στοίβα έχει το bit ίσο με 1)
– Time-to-Live (TTL) (8 bits)
Επικεφαλίδα MPLS
Frame Header MPLS Header IP Header Payload
Label Exp S TTL
• Ο κάθε MPLS δρομολογητής (Label Switch Router – LSR) διατηρεί πίνακες 
δρομολόγησης:
• Η δρομολόγηση σε ένα LSR γίνεται ως εξής:
– Εξάγεται η τιμή του label από την επικεφαλίδα MPLS του πακέτου
– Εντοπίζεται η γραμμή του πίνακα δρομολόγηση που περιέχει το label 
του πακέτου στο πεδίο “in label”
– Αντικαθιστάται η τιμή του label στο πακέτου με την τιμή του “out label” 
στην γραμμή του πίνακα
– Το πακέτο προωθείται στη θύρα που αντιστοιχεί στο “output interface” 
της γραμμής του πίνακα
Προώθηση Πακέτων με το MPLS
in 
label
out 
label
prefix output
interface
8 13 15.1.3 1
12 4 15.4.6 2
• Στην όρια του δικτύου MPLS τοποθετούνται δρομολογητές (Label Edge 
Routers – LERs) που προωθούν πακέτα ως εξής (κατά την είσοδο σε ένα 
δίκτυο MPLS):
– Εξάγεται η διεύθυνση IP προορισμού από την επικεφαλίδα IP του 
πακέτου
– Εντοπίζεται η γραμμή του πίνακα δρομολόγηση της οποίας το prefix 
αντιστοιχεί στη διεύθυνση IP προορισμού του πακέτου
– Γίνεται ενθυλάκωση του πακέτου IP σε ένα πακέτο MPLS με το label να 
παίρνει την τιμή του “out label” της γραμμής του πίνακα
– Το πακέτο προωθείται στη θύρα που αντιστοιχεί στο “output interface” 
της γραμμής του πίνακα
Προώθηση Πακέτων με το MPLS
in 
label
out 
label
prefix output
interface
– 1 15.1.3 1
– 5 15.4.6 2
Παράδειγμα MPLS
1 2
3
in 
label
out 
label
prefix output
interface
– 1 10.1.2 2
– 4 10.8.1 2
1 2
1 2
1 IPB Payload
A B
4 IPC Payload
C
1
2
10.15.3.12 10.1.2.120
10.8.1.73
Παράδειγμα MPLS
1 2
3
in 
label
out 
label
prefix output
interface
– 1 10.1.2 2
– 4 10.8.1 2
1 2
1 2
1 IPB Payload
A B
4 IPC Payload 8 IPB Payload
C
1
2
10.15.3.12 10.1.2.120
10.8.1.73
in 
label
out 
label
prefix output
interface
1 8 10.1.2 2
4 7 10.8.1 3
Παράδειγμα MPLS
1 2
3
in 
label
out 
label
prefix output
interface
– 1 10.1.2 2
– 4 10.8.1 2
1 2
1 2
1 IPB Payload
A B
4 IPC Payload 8 IPB Payload IPB Payload
C
IPC Payload
1
2
10.15.3.12 10.1.2.120
10.8.1.73
in 
label
out 
label
prefix output
Interface
8 – 10.1.2 2
in 
label
out 
label
prefix output
interface
1 8 10.1.2 2
4 7 10.8.1 3
• Πρωτόκολλο για ευέλικτη ενθυλάκωση πακέτων:
– Παρέχει τη δυνατότητα ενθυλάκωσης σε πακέτα πολλών πρωτοκόλλων
– Διευκολύνει την αποπολυπλεξία μέσω κλειδιού (key) 4 bytes
– Μικρή επιβάρυνση (overhead): 4 bytes χωρίς τη χρήση των επιπλέον 
πεδίων της επικεφαλίδας
Generic Routing Encapsulation (GRE)
Reserved Recur Flags Version Protocol Type
Checksum (optional) Offset (optional)
Key (optional)
Sequence Number (optional)
Routing (optional)
32 bits
• Ένα πακέτο GRE έχει τη μορφή:
• Παράδειγμα:
– Ethernet over GRE (EGRE)
Ενθυλάκωση με το GRE
Επικεφαλίδα Παράδοσης
Επικεφαλίδα GRE
Πακέτο με τα δεδομένα
Επικεφαλίδα IP
Επικεφαλίδα GRE
Πλαίσιο Ethernet
• Το VPN αποτελεί μίας υπηρεσία σύνδεσης σε ένα ιδιωτικό δίκτυο με τα εξής 
χαρακτηριστικά:
– Απομακρυσμένη πρόσβαση μέσω τεχνολογιών εικονικών συνδέσεων 
(tunnels)
– Ασφαλής πρόσβαση στο εικονικό δίκτυο μέσω της κωδικοποίησης των 
δεδομένων αποστολής και λήψης
– Διαχωρισμός της κίνησης από το υπόλοιπο Διαδίκτυο
Virtual Private Networks (VPN)
• Ασφαλής πρόσβαση στο δίκτυο εργασίας ή στο cloud εξ'αποστάσεως
• Απόκρυψη της δραστηριότητας από τον διαχειριστή του δικτύου (π.χ. ISP)
• Πρόσβαση σε υπηρεσίες διαδικτύου που δεν είναι διαθέσιμες στη χώρα του 
χρήστη (π.χ. Netflix, υπηρεσίες IPTV)
• Παράκαμψη τοπικής λογοκρισίας (π.χ., Facebook, Youtube)
Συνήθεις Χρήσεις του VPN
• Στρώμα 2 (χρήση διευθύνσεων MAC):
– Point-to-point:
• MPLS, L2TP, PPTP, PPP
– Point-to-multipoint:
• Virtual Private LANs
• Στρώμα 3 (χρήση διευθύνσεων IP):
– IP-in-IP
– GRE
– IPsec
Τεχνολογίες Tunnels για VPN
• Μοντέλο πελάτη:
– Η διαχείριση του VPN 
γίνεται από τον ίδιο τον 
οργανισμό (π.χ. εταιρεία, 
πανεπιστήμιο)
• Μοντέλο παρόχου (PPVPN):
– Πάροχος (π.χ. ISP) 
αναλαμβάνει τη διαχείριση 
του VPN (προσφέρεται ως 
υπηρεσία)
– Χρήση εικονικών 
δρομολογητών με 
ξεχωριστό πρωτόκολλο και 
πίνακα δρομολόγησης
Μοντέλα Υπηρεσιών για VPN
VPN 
Διαδίκτυο
Διαδίκτυο
VPN
VPN
VPN VPN
VPN
• Έλεγχος των ανακοινώσεων διαδρομών για την απομόνωση του VPN από 
το υπόλοιπο Διαδίκτυο
– Ανακοινώσεις διαδρομών από κόμβους του VPN διαδίδονται στους 
υπόλοιπους κόμβους του VPN (και όχι στο υπόλοιπο διαδίκτυο)
Φιλτράρισμα Διαδρομών σε VPN
Internet
A1 A2
A3
Internet
Permit 
A2, A3
Block 
A1,A2,A3
Block 
A1,A2,A3
Permit 
A1, A3
Permit 
A1, A2
VPN A
Εικονικές Δικτυακές Διεπαφές
• Πολλές εικονικές μηχανές μπορεί να χρειαστεί να διαμοιραστούν μία 
δικτυακή διεπαφή:
– Τα πακέτα θα πρέπει να προωθηθούν στην εικονική μηχανή 
προορισμού
Διαμοιρασμός Δικτυακών Διεπαφών
DomU DomU
vif vif vif
NIC
DomU
✓ Διαθέσιμες πλατφόρμες λογισμικού (Click Modular Router, OpenvSwitch)
✓ Δυνατότητα εφαρμογής εξειδικευμένων αλγορίθμων 
χρονοπρογραμματισμού (π.χ. weighted round robin)
 Δυσκολία στην αξιοποίηση πολυπύρηνων επεξεργαστών
Ταξινόμηση Πακέτων μέσω Λογισμικού
• Πλατφόρμα ανοικτού λογισμικού για την προώθηση και επεξεργασία 
πακέτων:
– Διευκολύνει την υλοποίηση π.χ. δρομολογητών, switches, firewalls σε 
υπολογιστές
– Παρέχει μία πληθώρα λειτουργιών (elements), π.χ. μεταφορά πακέτων 
από/προς δικτυακές θύρες, εισαγωγή σε ουρές, ταξινόμηση, προσθήκη 
επικεφαλίδων, αναζήτηση σε πίνακες δρομολόγησης, κ.ά.
– Δυνατότητα τροποποίησης ή δημιουργίας νέων στοιχείων επεξεργασίας 
πακέτων
– Λειτουργία σε περιβάλλον πυρήνα του Λ/Σ όσο και σε περιβάλλον 
εφαρμογής (userspace)
– Υψηλή απόδοση κατά την επεξεργασία και προώθηση πακέτων
– Υποστήριξη πολυπύρηνων επεξεργαστών
Click Modular Router
• Το Click συνδυάζει τα χρησιμοποιούμενα 
στοιχεία με τη μορφή γράφου
• Παράδειγμα απλοποιημένης υλοποίησης 
δρομολογητή 
Click Modular Router
Ταξινόμηση Πακέτων μέσω Λογισμικού
Περιορισμός λόγω 
επεξεργαστικής ισχύος
• Επεξεργασία πακέτων κατά την έξοδο:
Περιορισμός λόγω 
ταυτοχρονισμού (concurrency) 
✓ Ταξινόμηση πακέτων από την κάρτα δικτύου χωρίς τη συνδρομή του 
επεξεργαστή
 Περιορισμένη υποστήριξη αλγορίθμων χρονοπρογραμματισμού (π.χ. μόνο 
round robin)
 Περιορισμένος αριθμός εικονικών ουρών ανά δικτυακή επαφή (π.χ. 32 
ουρές)
Ταξινόμηση Πακέτων μέσω Υλικού
• Intel VMDq:
– Ταξινόμηση πακέτων σε εικονικές ουρές με βάση τη διεύθυνση MAC 
προορισμού του πακέτου
– Ενδεχόμενη αλλαγή της σειράς των πακέτων σε μία δικτυακή ροή
– Χρειάζεται η διαμεσολάβηση του επόπτη εικονικών μηχανών 
(hypervisor) για τη μεταφορά των πακέτων μεταξύ της εικονικής ουράς 
και της εικονικής μηχανής\
• SR-IOV (μετεξέλιξη του VMDq):
– Ταξινόμηση πακέτων σε εικονικές ουρές όπως και στο VMDq
– Απευθείας μεταφορά πακέτων στην εικονική μηχανή (χωρίς τη 
διαμεσολάβηση του επόπτη)
– Απαιτείται υποστήριξη από τον επόπτη
Τεχνολογίες Ταξινόμησης Πακέτων
• Microsoft Receiver-side Scaling (RSS):
– Ταξινόμηση πακέτων σε εικονικές ουρές με τη χρήση συνάρτησης hash
– Κάθε δικτυακή ροή προωθείται σε ξεχωριστή εικονική ουρά
• π.χ. μια δικτυακή ουρά μπορεί να οριστεί μέσω των 5 στοιχείων: 
πρωτόκολλο μεταφοράς, διευθύνση IP αποστολής/προορισμού, 
θύρα αποστολής/προορισμού
Τεχνολογίες Ταξινόμησης Πακέτων
Απόδοση κατά την Ταξινόμηση Πακέτων
Βιβλιογραφία
• P. Barham et al., Xen and the Art of Network Virtualization, ACM SOSP 
2003
• D. Farinacci et al., Generic Routing Encapsulation (GRE), RFC 2784, 
IETF, 2000
• E. Kohler, The Click Modular Router, Ph.D. Thesis, MIT, USA, 2001
• N. Egi et al., Forwarding Path Architectures for Multicore Software 
Routers, ACM CoNEXT PRESTO 2010
Ερωτήσεις
Δίκτυα Οριζόμενα Μέσω Λογισμικού
Υπολογιστική Νέφους
Παναγιώτης Παπαδημητρίου
Συσκευές Προώθησης Πακέτων
Υποδίκτυο Α
Δρομολογητής
Υποδίκτυο Β
Switch
• Δρομολογητές:
– Προωθούν πακέτα IP μεταξύ διαφορετικών (υπο)δικτύων
• Μεταγωγείς (switch):
– Προωθούν πλαίσια Ethernet εντός ενός (υπο)δικτύου
• Μονάδα δεδομένων (data plane):
– Προωθεί πακέτα με υψηλή ταχύτητα
• Μονάδα ελέγχου (control plane):
– Υπολογίζει δικτυακές διαδρομές σε συνεργασία με άλλους 
δρομολογητές
Δρομολογητές
• Εκτέλεση κατανεμημένων πρωτοκόλλων δρομολόγησης
– Δρομολόγηση εντός ενός δικτύου: OSPF, RIP, IS-IS
– Δρομολόγηση διαμέσου πολλών δικτύων: BGP
• Κάθε πρωτόκολλο ενημερώνει τον πίνακα προώθησης του δρομολογητή για
κάθε νέα διαδρομή (ή υπάρχουσα διαδρομή που έχει υποστεί μεταβολή)
Μονάδα Ελέγχου
• Ενσωμάτωση της μονάδας ελέγχου στη δικτυακή συσκευή:
– Εξαιρετικά δύσκολη η τροποποίηση κάποιου υλοποιημένου 
πρωτόκολλου δρομολόγησης (πρέπει να πειστεί η Cisco!)
– Πολύ αργή εξέλιξη των δικτύων
– Εμπόδιο στην εφαρμογή καινοτόμων μηχανισμών για δρομολόγηση και 
διαχείριση δικτύων
• Κατανεμημένη δρομολόγηση:
– Οι δικτυακές συσκευές δεν έχουν πλήρη εικόνα του δικτύου
– Ο υπολογισμός διαδρομών καθυστερεί σημαντικά (το BGP χρειάζεται 
αρκετά λεπτά για να συγκλίνει)
Προβλήματα λόγω των Δρομολογητών
OpenFlow
• Το OpenFlow είναι ένα API για την κεντρική διαχείριση 
switches από έναν εξωτερικό ελεγκτή (controller)
• Το επίπεδο ελέγχου αποσυνδέεται από το υλικό και 
μεταφέρεται στον ελεγκτή
• Ο ελεγκτής ουσιαστικά καθορίζει τον τρόπο με τον 
οποίο θα προωθούνται τα πακέτα σε κάθε switch
– Το switch περιλαμβάνει ένα πίνακα ροών (flow 
table), όπου ο ελεγκτής εισάγει κανόνες 
προώθησης, σύμφωνα με τους οποίους ο switch 
αποφασίζει πως θα μεταχειριστεί κάθε εισερχόμενο 
πακέτο
• Το OpenFlow είναι το πιο διαδεδομένο πρωτόκολλο για 
προγραμματιζόμενα switches
OpenFlow
Control Path OpenFlow
Data Path
OpenFlow Controller
OpenFlow Switch
• Το OpenFlow έχει υιοθετηθεί από τους περισσότερους κατασκευαστές 
switches (π.χ. HP, NEC, Cisco, Juniper)
Υιοθέτηση του OpenFlow 
Ciena Coredirector
Juniper MX-series NEC IP8800
HP Procurve 5400
Pronto 3240/3290
Netgear 7324
Σύγκριση OpenFlow με Ethernet Switch
Control Path OpenFlow
Data Path
Control Path
Data Path
OpenFlow Controller
SW Layer
HW Layer
Ethernet Switch OpenFlow Switch
OpenFlow Protocol (SSL/TCP)
• O πίνακας ροών περιλαμβάνει κανόνες προώθησης (flow rules)
• Ένας κανόνας προώθησης αποτελείται από:
– Τη θύρα εισόδου του πακέτου και ένα σύνολο από πεδία επικεφαλίδας 
(στρώμα 2-4), π.x. διευθύνσεις IP, MAC, θύρες TCP/UDP
– Μία ενέργεια που εφαρμόζεται στο κάθε πακέτο 
• Ένας κανόνας προώθησης δεν χρειάζεται να ορίζει τιμές σε όλα τα 
πεδία:
– Κάποια πεδία μπορούν να οριστούν με ‘*’ (οποιαδήποτε τιμή)
Πίνακας Ροών (Flow Table)
Πίνακας Ροών (Flow Table)
OpenFlow Firmware
Input
Port
VLAN
ID
Ethernet IP TCP
Action
Src Dst Type Src Dst Proto Src Dst
* * * * * * 5.1.1.6 * * * port 1
* * * * * * * * * 80 port 4
OpenFlow Controller
SW Layer
HW Layer
• Ο ελεγκτής μπορεί να εκτελέσει τις παρακάτω βασικές λειτουργίες στον 
πίνακα ροών του switch:
– Εισαγωγή νέου κανόνα προώθησης
– Τροποποίηση κανόνα προώθησης
– Διαγραφή κανόνα προώθησης
• Το switch μπορεί να εκτελέσει τις παρακάτω βασικές ενέργεις σε κάθε 
πακέτο:
– Προώθηση σε μία ή περισσότερες θύρες του switch
– Ενθυλάκωση του πακέτου και αποστολή στον ελεγκτή (τυπική ενέργεια 
για κάθε πακέτο για το οποίο δεν υπάρχει κάποιος κανόνας προώθησης 
στον πίνακα ροών του switch)
– Απόρριψη του πακέτου
Υποστηριζόμενες Λειτουργίες
• Για κάθε εισερχόμενο πακέτο, ο switch αναζητά την αντιστοίχιση του στον 
πίνακα ροών:
– Ο switch αναζητά ένα κανόνα στον πίνακα ροών που να ταιριάζει με τα 
πεδία επικεφαλίδας του πακέτου (όσα έχουν οριστεί στον κάθε κανόνα)
– Αν βρεθεί ένας τέτοιος κανόνας, το switch εφαρμόζει στο πακέτο την 
ενέργεια που καθορίζεται στον κανόνα (π.χ. προώθηση, απόριψη)
– Αν δεν βρεθεί κάποιος κανόνας που να ταιριάζει με την επικεφαλίδα του 
πακέτου, τότε το πακέτο προωθείται στον ελεγκτή
• Ο ελεγκτής εξετάζει το πακέτο με βάση το πρόγραμμα ελέγχου και 
επιλέγει την ενέγεια που θα εφαρμοστεί στο πακέτο
• Ο ελεγκτής εισάγει ένα κανόνα προώθησης στον πίνακα, ώστε ο 
switch να είναι σε θέση να μεταχειριστεί επόμενα αντίστοιχα πακέτα, 
χωρίς την επαναποστολή στον ελεγκτή
Αναζήτηση στον Πίνακα Ροών
• Το OpenFlow επιτρέπει τον ορισμό προτεραιότητας σε κάθε κανόνα 
προώθησης
• Οι προτεραιότητες χρησιμοποιούνται στην περίπτωση που η επικεφαλίδα 
ενός πακέτου ταιριάζει σε περισσότερους από ένα κανόνες προώθησης 
(αυτό είναι δυνατό λόγω της χρήσης ‘*’)
– Ο switch εφαρμόζει στο πακέτο την ενέργεια του κανόνα προώθησης με 
την υψηλότερη προτεραιότητα
Προτεραιότητες Κανόνων Προώθησης
OpenFlow Controllers
Controller Γλώσσα 
Προγραμματισμού
NOX C
POX Python
Beacon Java
Floodlight Java
Trema C / Ruby
Ryu Python
• Μεταγωγή σε επίπεδο 2 (Ethernet)
• Δρομολόγηση σε επίπεδο 3 (IP)
Παραδείγματα Προώθησης Πακέτων
Input
Port
VLAN
ID
Ethernet IP TCP
Action
Src Dst Type Src Dst Proto Src Dst
* * * 1D-6.. * * * * * * port 3
Input
Port
VLAN
ID
Ethernet IP TCP
Action
Src Dst Type Src Dst Proto Src Dst
* * * * * * 5.1.1.6 * * * port 1
• Firewall
Παραδείγματα Προώθησης Πακέτων
Input
Port
VLAN
ID
Ethernet IP TCP
Action
Src Dst Type Src Dst Proto Src Dst
* * * * * * * * * 22 drop
Επαναδρομολόγηση με το OpenFlow
1
2 3
IP: 8.1.1.5
Port: 1050
Input
Port
VLAN
ID
Ethernet IP TCP
Action
Src Dst Type Src Dst Proto Src Dst
* * * * * 8.1.1.5 * * 1050 * port 2
OF Switch
OF Controller
Επαναδρομολόγηση με το OpenFlow
1
2 3
IP: 8.1.1.5
Port: 1050
Input
Port
VLAN
ID
Ethernet IP TCP
Action
Src Dst Type Src Dst Proto Src Dst
* * * * * 8.1.1.5 * * 1050 * port 3
OF Switch
OF Controller
• Δυνατότητες των τελευταίων εκδόσεων τoυ OpenFlow:
– Αναζήτηση σε πολλαπλούς πίνακες ροών
– Ταίριασμα πεδίων με μεταβλητό μήκος (π.χ. στα πρώτα 24 bits μίας 
διεύθυνσης IP)
– Υποστήριξη MPLS
– Προσθήκη Time-to-Live (TTL)
Νέες Δυνατότητες του OpenFlow
Software-Defined Networks (SDN)
• Σε ένα software-defined network (SDN), το επίπεδο ελέγχου (control plane) 
τοποθετείται σε ένα εξωτερικό ελεγκτή, ο οποίος διαχειρίζεται ένα αριθμό 
από switches με τη χρήση πρωτοκόλλων, όπως το OpenFlow
• Βασικά χαρακτηριστικά ενός SDN:
– Κεντρική διαχείριση του δικτύου
– Ορατότητα σε όλο το δίκτυο
– Απεικόνιση του δικτύου με διαφορετικές όψεις (network abstraction)
Δίκτυα Οριζόμενα μέσω Λογισμικού (SDN)
Δίκτυα Οριζόμενα μέσω Λογισμικού (SDN)
OpenFlow
Protocol
OpenFlow 
Switch
OpenFlow 
Switch
OpenFlow 
Switch
Controller
• Πλεονεκτήματα:
– Ευκολία στην εγκατάσταση / αναβάθμιση πρωτοκόλλων δρομολόγησης
– Απλούστερη διαχείριση του δικτύου μέσω απλοποιημένων όψεων του 
δικτύου
– Σύγκλιση σε ένα πρότυπο (OpenFlow), το οποίο εξελίσσεται ταχύτατα
και παρέχει πολλές νέες δυνατότητες
• Μειονεκτήματα:
– SDN ευρείας κλίμακας απαιτούν διαλειτουργικότητα (interoperability) 
μεταξύ πολλών ελεγκτών 
– Ετερογενές υλικό μεταγωγής μπορεί να χρειαστεί χρονοδρομολόγηση 
κατά την εισαγωγή κανόνων προώθησης στους πίνακες ροών
Δίκτυα Οριζόμενα μέσω Λογισμικού (SDN)
• Πώς μπορεί να απλουστευθεί η υλοποίηση ελέχγου πρόσβασης 
(access control) σε ένα SDN;
Διαφορετικές Όψεις ενός SDN
• Πώς μπορεί να απλουστευθεί η υλοποίηση ελέχγου πρόσβασης 
(access control) σε ένα SDN;
Διαφορετικές Όψεις ενός SDN
Απλοποιημένη όψη
FlowVisor
Τεμαχισμός SDN
OpenFlow Switch
Flow Table
Flow Table
Flow Table
Controller C
Controller B
Controller A
• To FlowVisor αποτελεί μία πλατφόρμα για τον τεμαχισμό δικτύων SDN
• Επιτρέπει σε πολλούς χρήστες να αναλάβουν τη διαχείριση τμήματος ενός 
δικτύου μέσω του πρωτοκόλλου OpenFlow
• Ο κάθε διαχειριστής:
– Χρησιμοποιεί ένα ξεχωριστό ελεγκτή
– Καθορίζει το τεμάχιο (slice) του δικτύου που θα διαχειριστεί
– Μπορεί να παρακολουθήσει την κίνηση μόνο εντός του slice του
– Μπορεί να παρέμβει στον τρόπο προώθησης των πακέτων μόνο εντός 
του slice του
Τεμαχισμός SDN με το FlowVisor
• To FlowVisor λειτουργεί μεταξύ του switch και του ελεγκτή:
– Δεσμεύει τμήμα του πίνακα ροών για κάθε ελεγκτή
– Δεσμεύει πόρους από τον επεξεργαστή του switch για κάθε ελεγκτή
– Ελέγχει τα δικαιώματα πρόσβασης σε κάθε μήνυμα ελέγχου 
– Τροποποιεί τις αναφορές στα μηνύματα ελέγχου (μετατρέπει εικονικά 
στοχεία, π.χ. switches, θύρες, στα αντίστοιχα φυσικά) 
Λειτουργία του FlowVisor
OpenFlow
FlowVisor
OpenFlow 
Switch
Controller
• Κάθε slice περιλαμβάνει:
– Τμήμα της τοπολογίας και των switches του δικτύου
– Ένα μέγιστο αριθμό κανόνων προώθησης
– Ποσοστό του διαθέσιμου bandwidth
– Ποσοστό της επεξεργαστικής ισχύος του κάθε switch
– Τμήμα των ροών του δικτύου (flowspace)
Ορισμός Τεμαχίων (Slices)
Παράδειγμα Ορισμού Flowspace
• Κάθε slice θα αντιστοιχεί σε μία διαφορετική υπηρεσία:
– Το Slice 1 θα διαχειρίζεται κίνηση HTTP
– Το Slice 2 θα διαχειρίζεται κίνηση VoIP
– To Slice 3 θα διαχειρίζεται όλες τις υπόλοιπες υπηρεσίες 
• Ευελιξία στη διαφοροποίηση μεταξύ υπηρεσιών 
Παραδείγματα Slices
Έλεγχος Πολιτικής (Policy Check)
OpenFlow
FlowVisor
OpenFlow
Protocol
OpenFlow 
Switch
OpenFlow 
Switch
OpenFlow 
Switch
Controller A Controller B Controller C
Packet
Άφιξη πακέτου χωρίς κάποια 
καταχώρηση στον πίνακα ροών:
Έλεγχος Πολιτικής (Policy Check)
OpenFlow
FlowVisor
OpenFlow
Protocol
OpenFlow 
Switch
OpenFlow 
Switch
OpenFlow 
Switch
Controller A Controller B Controller C
Packet
Άφιξη πακέτου χωρίς κάποια 
καταχώρηση στον πίνακα ροών:
– Το FlowVisor προωθεί το 
πακέτο στον Controller C γιατί 
σε αυτόν ανήκει η ροή
Έλεγχος Πρόσβασης (Access Control)
OpenFlow
FlowVisor
OpenFlow
Protocol
OpenFlow 
Switch
OpenFlow 
Switch
OpenFlow 
Switch
Controller A Controller B Controller C
Entry
Άφιξη μηνύματος ελέγχου στο 
FlowVisor:
Έλεγχος Πρόσβασης (Access Control)
OpenFlow
FlowVisor
OpenFlow
Protocol
OpenFlow 
Switch
OpenFlow 
Switch
OpenFlow 
Switch
Controller A Controller B Controller C
Entry
Άφιξη μηνύματος ελέγχου στο 
FlowVisor:
– Το FlowVisor προωθεί το 
πακέτο στο αντίστοιχο switch 
γιατί ο Controller C έχει 
δικαίωμα πρόσβασης στη ροή
Έλεγχος Πρόσβασης (Access Control)
OpenFlow
FlowVisor
OpenFlow
Protocol
OpenFlow 
Switch
OpenFlow 
Switch
OpenFlow 
Switch
Controller A Controller B Controller C
Entry
Άφιξη μηνύματος ελέγχου στο 
FlowVisor:
Έλεγχος Πρόσβασης (Access Control)
OpenFlow
FlowVisor
OpenFlow
Protocol
OpenFlow 
Switch
OpenFlow 
Switch
OpenFlow 
Switch
Controller A Controller B Controller C
Entry
Άφιξη μηνύματος ελέγχου στο 
FlowVisor:
– Το FlowVisor δεν προωθεί το 
πακέτο γιατί ο Controller C 
δεν έχει δικαίωμα πρόσβασης 
στη ροή
Βιβλιογραφία
• N. McKeown, et al., OpenFlow: Enabling Innovation in Campus 
Networks, 2008
• B. Nunes et al., A Survey of Software-Defined Networking: Past, 
Present, and Future of Programmable Networks, IEEE Communications 
Surveys & Tutorials, 2014
• R. Sherwoord, et al., Can the Production Network Be the Testbed?, 
USENIX OSDI 2010
Ερωτήσεις
Διαχείριση Εικονικών Μηχανών
Υπολογιστική Νέφους
Παναγιώτης Παπαδημητρίου
Εικονικά Switches
• Ο τομέας διαχείρισης:
– Δημιουργεί / τερματίζει / μετακινεί εικονικές μηχανές
– Παρακολουθεί τη χρήση των πόρων του εξυπηρετητή
Διαχείριση Εικονικών Εξυπηρετητών
Τομέας 
Διαχείρισης
Τομέας 
Φιλοξενίας 
Εικονικής 
Μηχανής
Επόπτης
NIC NIC NIC
Τομέας 
Φιλοξενίας 
Εικονικής 
Μηχανής
Τομέας 
Φιλοξενίας 
Εικονικής 
Μηχανής
Σύνδεση με το Δίκτυο
Τομέας Διαχείρισης Τομέας 
Φιλοξενίας 
Εικονικής 
Μηχανής
Επόπτης
Back-end 
NIC
Front-end 
NIC
NIC
• Σύνδεση των front-end και back-end εικονικών δικτυακών διεπαφών 
(π.χ. κανάλια E/E του Xen)
Σύνδεση με το Δίκτυο
Τομέας Διαχείρισης Τομέας 
Φιλοξενίας 
Εικονικής 
Μηχανής
Επόπτης
Back-end 
NIC
Front-end 
NIC
NIC
• Σύνδεση των front-end και back-end εικονικών δικτυακών διεπαφών 
(π.χ. κανάλια E/E του Xen)
• Σύνδεση των φυσικών και back-end εικονικών δικτυακών διεπαφών 
(π.χ. γέφυρα Linux)
Σύνδεση με το Δίκτυο
Τομέας Διαχείρισης Τομέας 
Φιλοξενίας 
Εικονικής 
Μηχανής
Επόπτης
Back-end 
NIC
Front-end 
NIC
NIC
• Τα εισερχόμενα πακέτα θα πρέπει να προωθηθούν στην εικονική μηχανή 
προορισμού
Ταξινόμηση Εισερχόμενων Πακέτων
Τομέας Διαχείρισης Τομέας 
Φιλοξενίας 
Εικονικής 
Μηχανής
Επόπτης
Back-end 
NIC
Front-end 
NIC
NIC
Back-end 
NIC
Τομέας 
Φιλοξενίας 
Εικονικής 
Μηχανής
Front-end 
NIC
• Ταξινόμηση πακέτων με βάση:
– Διεύθυνση προορισμού MAC ή IP 
– VLAN ID
– MPLS label
Ταξινόμηση Εισερχόμενων Πακέτων
Τομέας Διαχείρισης Τομέας 
Φιλοξενίας 
Εικονικής 
Μηχανής
Επόπτης
Back-end 
NIC
Front-end 
NIC
NIC
Back-end 
NIC
Τομέας 
Φιλοξενίας 
Εικονικής 
Μηχανής
Front-end 
NIC
Tag 
Protocol ID
16 bits
User 
Priority
3 bits 
Canonical 
Format Ind. 
1 bit
VLAN ID
12 bits
VLAN Tag
Ταξιν/τής
Πακέτων
Ταξινόμηση Εισερχόμενων Πακέτων
Τομέας Διαχείρισης Τομέας 
Φιλοξενίας 
Εικονικής 
Μηχανής
Επόπτης
Back-end 
NIC
Front-end 
NIC
NIC
Back-end 
NIC
Τομέας 
Φιλοξενίας 
Εικονικής 
Μηχανής
Front-end 
NIC
Ταξιν/τής
Πακέτων
176.12.198.1
176.12.198.50 176.12.198.67
Ταξινόμηση Εισερχόμενων Πακέτων
Τομέας Διαχείρισης Τομέας 
Φιλοξενίας 
Εικονικής 
Μηχανής
Επόπτης
Back-end 
NIC
Front-end 
NIC
NIC
Back-end 
NIC
Τομέας 
Φιλοξενίας 
Εικονικής 
Μηχανής
Front-end 
NIC
Ταξιν/τής
Πακέτων
176.12.198.1
176.12.198.50 176.12.198.67
src: 165.124.17.12 dst: 176.12.198.1 src: 165.124.17.56 dst: 176.12.198.67 payload
Εξωτερική επικεφαλίδα IP
Ταξινόμηση Εισερχόμενων Πακέτων
Τομέας Διαχείρισης Τομέας 
Φιλοξενίας 
Εικονικής 
Μηχανής
Επόπτης
Back-end 
NIC
Front-end 
NIC
NIC
Back-end 
NIC
Τομέας 
Φιλοξενίας 
Εικονικής 
Μηχανής
Front-end 
NIC
Ταξιν/τής
Πακέτων
176.12.198.1
176.12.198.50 176.12.198.67
src: 165.124.17.12 dst: 176.12.198.1 src: 165.124.17.56 dst: 176.12.198.67 payload
Εξωτερική επικεφαλίδα IP
Ταξινόμηση Εισερχόμενων Πακέτων
Τομέας Διαχείρισης Τομέας 
Φιλοξενίας 
Εικονικής 
Μηχανής
Επόπτης
Back-end 
NIC
Front-end 
NIC
NIC
Back-end 
NIC
Τομέας 
Φιλοξενίας 
Εικονικής 
Μηχανής
Front-end 
NIC
Ταξιν/τής
Πακέτων
176.12.198.1
176.12.198.50 176.12.198.67
src: 165.124.17.56 dst: 176.12.198.67 payload
Ταξινόμηση Εισερχόμενων Πακέτων
Τομέας Διαχείρισης Τομέας 
Φιλοξενίας 
Εικονικής 
Μηχανής
Επόπτης
Back-end 
NIC
Front-end 
NIC
NIC
Back-end 
NIC
Τομέας 
Φιλοξενίας 
Εικονικής 
Μηχανής
Front-end 
NIC
Ταξιν/τής
Πακέτων
176.12.198.1
176.12.198.50 176.12.198.67
src: 165.124.17.56 dst: 176.12.198.67 payload
• Ένα εικονικό switch συνδέει τις εικονικές με τις φυσικές δικτυακές διεπαφές
Εικονικό Switch
Τομέας 
Φιλοξενίας 
Εικονικής 
Μηχανής
Εικονικό Switch
NIC NIC NIC
Τομέας 
Φιλοξενίας 
Εικονικής 
Μηχανής
Τομέας 
Φιλοξενίας 
Εικονικής 
Μηχανής
Τομέας 
Φιλοξενίας 
Εικονικής 
Μηχανής
NIC NIC NIC NIC NIC NIC
• Ένα εικονικό switch συνδέει τις εικονικές με τις φυσικές δικτυακές διεπαφές
Εικονικό Switch
Τομέας 
Φιλοξενίας 
Εικονικής 
Μηχανής
Εικονικό Switch
NIC NIC NIC
Τομέας 
Φιλοξενίας 
Εικονικής 
Μηχανής
Τομέας 
Φιλοξενίας 
Εικονικής 
Μηχανής
Τομέας 
Φιλοξενίας 
Εικονικής 
Μηχανής
NIC NIC NIC NIC NIC NIC
• Ένας εξωτερικός ελεγκτής αναλαμβάνει τη διαχείριση του εικονικού 
switch σε κάθε εξυπηρετητή
– Κεντρικός έλεγχος και διαχείριση
– Ορατότητα σε όλο το δίκτυο
Ελεγκτής Εικονικού Switch
NIC
Guest 
Domain
Guest 
Domain
Guest 
Domain
Virtual Switch
NIC NIC NIC
Guest 
Domain
Guest 
Domain
Guest 
Domain
Virtual Switch
NIC NIC
Controller
• Μοντέλο προώθησης πακέτων παρόμοιο με το OpenFlow
• Πλήθος υποστηριζόμενες λειτουργιών:
– Αναζήτηση σε πίνακες δρομολόγησης
– Τροποποίηση πεδίων επικεφαλίδας πακέτων
– Ενθυλάκωση / αποθυλάκωση πακέτων για τη δημιουργία tunnels
– Έλεγχος πρόσβασης (access control)
– Μηχανισμοί Ποιότητας Παροχής Υπηρεσιών (QoS)
– Κεντρική διαχείριση μέσω ενός ελεγκτή 
OpenvSwitch
Input
Port
VLAN
ID
Ethernet IP TCP
Action
Src Dst Type Src Dst Proto Src Dst
• Υλοποίηση:
– Ανοικτού κώδικα (open source)
– Συμβατότητα με επόπτες σε περιβάλλον Linux, όπως, Xen, KVM, 
VirtualBox
– Επεξεργασία και προώθηση πακέτων στον πυρήνα του Λ/Σ για υψηλή 
απόδοση
OpenvSwitch
OpenvSwitch
Μετακίνηση Εικονικών Μηχανών
• Οι επόπτες εικονικών εξυπηρετητών επιτρέπουν τη μετακίνηση εικονικών 
μηχανών (VM migration) μεταξύ διαφορετικών εξυπηρετητών
Μετακίνηση Εικονικών Μηχανών
NIC
VM1 VM2 VM3
Hypervisor
NIC
VM4 VM5
Hypervisor
• Οι επόπτες εικονικών εξυπηρετητών επιτρέπουν τη μετακίνηση εικονικών 
μηχανών (VM migration) μεταξύ διαφορετικών εξυπηρετητών
Μετακίνηση Εικονικών Μηχανών
NIC
VM1 VM2
Hypervisor
NIC
VM4 VM5
Hypervisor
VM3
• Αντιμετώπιση προβλημάτων στην εικονική μηχανή:
– Σφάλματα στο υλικό ή λογισμικό 
– Έλλειψη υπολογιστικών πόρων
– Χαμηλή ποιότητα παροχής υπηρεσίας
• Εφαρμογή πολιτικών του παρόχου υπολογιστικού νέφους:
– Εξισορρόπηση φορτίου
– Συγκέντρωση των εικονικών μηχανών στο μικρότερο δυνατό αριθμό 
εξυπηρετητών για την μείωση της κατανάλωσης ενέργειας
• Συντήρηση / αναβάθμιση εξυπηρετητή
Λόγοι Μετακίνησης Εικονικών Μηχανών
• Η μετακίνηση εικονικών μηχανών απαιτεί τη μεταφορά:
– των δεδομένων που είναι αποθηκευμένα στην κύρια μνήμη
– του σύστηματος αρχείων (συνήθως αρκετά GB)
– των δικτυακών συνδέσεων
• Η μετακίνηση εικονικών μηχανών μπορεί να οδηγήσει σε διαστήματα εκτός 
λειτουργίας (downtime)
– Λίγα δευτερόλεπτα σε ένα τοπικό δίκτυο
– Αρκετά δευτερόλεπτα ή λεπτά σε δίκτυα ευρείας περιοχής
Μετακίνηση Εικονικών Μηχανών
• Τεχνική «freeze-and-copy»:
– Διαδικασία μετακίνησης:
• Αναστολή της λειτουργίας της εικονικής μηχανής
• Μεταφορά των δεδομένων της μνήμης και του συστήματος αρχείων 
στον εξυπηρετητή προορισμού
• Επανεκκίνηση της εικονικής μηχανής στο νέο εξυπηρετητή
– Διασφαλίζεται η συνοχή και εγκυρότητα των δεδομένων στη μνήμη και 
του συστήματος αρχείων της εικονικής μηχανής
– Μεγάλος χρόνος εκτός λειτουργίας
Μετακίνηση Χωρίς Κοινό Αποθηκευτικό Μέσο
• Μεταφορά δεδομένων κατ’απαίτηση:
– Δεδομένα (π.χ. αρχεία) μεταφέρονται μόνο όταν χρειαστούν από κάποια 
εφαρμογή που εκτελείται στον εξυπηρετητή προορισμού
– Σύντομος χρόνος εκτός λειτουργίας
– Χαμηλή απόδοση εφαρμογών λόγω της καθυστέρησης κατά τη 
μεταφορά των δεδομένων
Μετακίνηση Χωρίς Κοινό Αποθηκευτικό Μέσο
• Μεταφορά δεδομένων εκ των προτέρων (pre-copy):
– Όλα τα δεδομένα (μνήμη, αρχεία) μεταφέρονται στον εξυπηρετητή 
προορισμού εκ των προτέρων
– Καλύτερη απόδοση εφαρμογών σε σχέση με τη μεταφορά κατ’απαίτηση
– Τμήματα αρχείων που έχουν τροποποιηθεί (μετά την αρχική μεταφορά 
τους) πρέπει να μεταφερθούν ξανά στον εξυπηρετητή προορισμού 
Μετακίνηση Χωρίς Κοινό Αποθηκευτικό Μέσο
• Η ύπαρξη κοινού αποθηκευτικού μέσου (π.χ. NFS) διευκολύνει τη 
μετακίνηση εικονικών μηχανών με ελάχιστο χρόνο αναμονής
– Δεν απαιτείται η μεταφορά του συστήματος αρχείων 
• Ελάχιστος χρόνος αναμονής που συνήθως δεν έχει κάποια επίπτωση στις 
εφαρμογές που τρέχουν στην εικονική μηχανή
• Χαμηλότερη απόδοση κατά τη μεταφορά δεδομένων από και προς το 
αποθηκευτικό μέσο (συγκριτικά με ένα τοπικό αποθηκευτικό μέσο)
Μετακίνηση με Κοινό Αποθηκευτικό Μέσο
• Αν η εικονική μηχανή εκτελεί εφαρμογές χρήστη:
– Πιθανές διαταραχές κατά την εκτέλεση γίνονται αντιληπτές από το 
χρήστη της εικονικής μηχανής
• Αν η εικονική μηχανή εκτελεί εφαρμογές εξυπηρετητή ή peer-to-peer:
– Μεγαλύτερο αντίκτυπο
– Προκαλούνται διαταραχές σε κάθε χρήστη που εξυπηρετείται από την 
εικονική μηχανή
• π.χ. διακοπή στην αναπαγωγή βίντεο στην περίπτωση που στην 
εικονική μηχανή φιλοξενείται ένας streaming server
Επίδραση Downtime σε Εφαρμογές
Κατανεμημένη Διαχείριση
 Ευκολία στην υλοποίηση
– Κεντρικός διαχειριστής με πλήρη γνώση και ορατότητα της υποδομής
 Περιορισμένη κλίμακα
 Δύσκολη ανάκαμψη από σφάλματα
Κεντρική Διαχείριση
 Κατανομή του φορτίου διαχείρισης
– Ευκολία στην κλιμάκωση
 Ευρωστία κατά την εμφάνιση σφαλμάτων
 Πολυπλοκότητα στην υλοποίηση
Κατανεμημένη Διαχείριση
• Ανάπτυξη έξυπνων πρακτόρων (agents) σε εξυπηρετητές (π.χ. ένας 
πράκτορας ανά εξυπηρετητή) 
• Επικοινωνία και συγχρονισμός μεταξύ των πρακτόρων για τη λήψη 
αποφάσεων σχετικά με τη διαχείριση του δικτύου, π.χ. την επιλογή 
εξυπηρετητών για τη φιλοξενία μίας εικονικής μηχανής
Κατανεμημένη Διαχείριση με Πράκτορες (Agents)
• Εξυπηρετητές με κοινές ιδιότητες ταξινομούνται σε μία ομάδα 
(cluster)
Ομαδοποίηση Εξυπηρετητών
0
6
5
8
4
3
1
7
11
10
12
9
2
0
6
5
8
4
3
1
7
11
10
12
9
2
0 1 2 7 6 12 8 10 11 3 4 5 9
Δομή Δεδομένων
Φυσικό 
Δίκτυο
Αναζήτηση Εξυπηρετητή για Φιλοξενία VM
0
6
5
8
4
3
1
7
11
10
12
9
2
4
6
5
8
3
1
7
11
10
12
9
2
X
MSG(nv
, dism) MSG(nv
, dism) MSG(nv
, dism) MSG(nv
, dism)
MSG(nv
, dism)
MSG(nv
, dism)
1. Ειδοποίηση όλων των 
πρακτόρων της 
ομάδας
2. Υπολογισμός του 
Δείκτη Ανομοιότητας
(ΔΑ)
3. Ανταλλαγή των ΔΑ
μεταξύ των πρακτόρων 
της ομάδας
4. Ο κάθε πράκτορας
συγκρίνει το δικό του
ΔΑ με τους 
υπόλοιπους που έλαβε
5. Ο εξυπηρετητής με το 
μικρότερο ΔΑ 
επιλέγεται για τη 
φιλοξενία της εικονικής 
μηχανής
• Ιδιότητες εικονικής μηχανής: nv = ((att1
, xv1), …, (attf
, xvp))
• Ιδιότητες εξυπηρετητή: ns = ((att1
, xs1), …, (attf
, xsp))
• όπου:
– p είναι ο αριθμός των ιδιοτήτων
– εκφράζει το επίπεδο ανομοιότητας μεταξύ μίας εικονικής μηχανής 
και ένος εξυπηρετητή
– εκφράζει τη βαρύτητα της ιδιότητας attf
Δείκτης Ανομοιότητας
( f )
dij 



 p
f
f
ij
f
ij
p
f
f
ij
w
w d
dism i j
1
( )
( )
1
( )
( , )







if jf
if jf f
ij if x x
if x x
d
1, 
0, 
( )
( f )
wij
Αποδοτικότητα Ανάκαμψης Σφαλμάτων
Πειραματικά αποτελέσματα με 10 εξυπηρετητές
Βιβλιογραφία
• B. Pfaff, et al., Extending Networking into the Virtualization Layer, ACM 
HotNets 2009
• I. Houidi, et al., Adaptive Virtual Network Provisioning, ACM SIGCOMM 
VISA 2010
• S. Venkatesha et al., Survey of Virtual Machine Migration Techniques, 
2009
• V. Medina and J. M. Garcia, A Survey of Migration Mechanisms of 
Virtual Machines, ACM Computing Surveys, 2014
Ερωτήσεις
Δρομολογητής ως Υπηρεσία Νέφους
Υπολογιστική Νέφους
Παναγιώτης Παπαδημητρίου
• Παραδοσιακά μοντέλα υπηρεσιών νέφους:
– Software as a Service (SaaS)
– Platform as a Service (PaaS)
– Infrastructure as a Service (IaaS)
• Νέα μοντέλα υπηρεσιών:
– Router as a Service
– Network as a Service
– SDN as a Service
– Radio Access Network as a Service
– Network Function as a Service
Υπηρεσίες Νέφους
• Παραδοσιακά μοντέλα υπηρεσιών νέφους:
– Software as a Service (SaaS)
– Platform as a Service (PaaS)
– Infrastructure as a Service (IaaS)
• Νέα μοντέλα υπηρεσιών:
– Router as a Service
– Network as a Service
– SDN as a Service
– Radio Access Network as a Service
– Network Function as a Service
Υπηρεσίες Νέφους
• Επίπεδο δεδομένων (data plane):
– Προωθεί πακέτα με υψηλή ταχύτητα
• Επίπεδο ελέγχου (control plane):
– Υπολογίζει δικτυακές διαδρομές σε συνεργασία με άλλους 
δρομολογητές
Δρομολογητές
• Οι δρομολογητές εγκαθίστανται στο δίκτυο πρόσβασης και στο δίκτυο 
κορμού του Παρόχου Υπηρεσιών Διαδικτύου
Χρήση Δρομολογητών
Δρομολογητές 
Κορμού
Δρομολογητές 
Πρόσβασης
Συνδρομητές Συνδρομητές
Δίκτυο Κορμού 
(Backbone)
Δίκτυο Κορμού της Sprint
Δρομολογητές σε Λογισμικό 
(Software Routers)
• Software router:
– Δρομολογητής υλοποιημένος σε ένα υπολογιστή (π.χ. εξυπηρετητή)
– Υλοποίηση του επιπέδου προώθησης (forwarding plane) και ελέγχου 
(control plane) σε λογισμικό 
Software Routers
Control plane
Forwarding plane
Packets
• Προγραμματισμός:
– Προγραμματιζόμενο επίπεδο προώθησης (π.χ. με το Click Modular 
Router)
• Eπεκτασιμότητα:
– Δυνατότητα επέκτασης του επιπέδου ελέγχου (π.χ. με το XORP)
• Απόδοση:
– Μπορεί ένας software router να επιτύχει υψηλή ταχύτητα προώθησης 
πακέτων;
Software Routers
• Dell PowerEdge 2950 
– 2 Intel Xeon X5355 CPUs (4 πυρήνες στα 2.66GHz)
• 32K L1d, 32K L1i, 4M L2 cache (μοιραζόμενη από 2 πυρήνες)
– 8 x 1GB κύρια μνήμη
• PC-5300 (667 MHz)
– 12 Θύρες Ethernet 1G
• 3 κάρτες δικτύου
• 4 PCIe γραμμές ανά κάρτα
Σύστημα Εκτέλεσης Μετρήσεων
• Η ταχύτητα προώθησης ξεπερνά τα 7 Mpps με πακέτα 64 bytes
• Εξαντλείται η κάθε θύρα 1G με μεγάλα πακέτα (1500 bytes) 
Ταχύτητα Προώθησης Πακέτων
1-6 unidirectional flows, 64-byte packets, 1 flow per core
CPU Core
Network 
interface
• Η ταχύτητα προώθησης ξεπερνά τα 7 Mpps με πακέτα 64 bytes
• Εξαντλείται η κάθε θύρα 1G με μεγάλα πακέτα (1500 bytes) 
Ταχύτητα Προώθησης Πακέτων
1-6 unidirectional flows, 64-byte packets, 1 flow per core
CPU Core
Network 
interface
• Η ταχύτητα προώθησης ξεπερνά τα 7 Mpps με πακέτα 64 bytes
• Εξαντλείται η κάθε θύρα 1G με μεγάλα πακέτα (1500 bytes) 
Ταχύτητα Προώθησης Πακέτων
1-6 unidirectional flows, 64-byte packets, 1 flow per core
CPU Core
Network 
interface
• Η ταχύτητα προώθησης ξεπερνά τα 7 Mpps με πακέτα 64 bytes
• Εξαντλείται η κάθε θύρα 1G με μεγάλα πακέτα (1500 bytes) 
Ταχύτητα Προώθησης Πακέτων
1-6 unidirectional flows, 64-byte packets, 1 flow per core
CPU Core
Network 
interface
• Η ταχύτητα προώθησης ξεπερνά τα 7 Mpps με πακέτα 64 bytes
• Εξαντλείται η κάθε θύρα 1G με μεγάλα πακέτα (1500 bytes) 
Ταχύτητα Προώθησης Πακέτων
1-6 unidirectional flows, 64-byte packets, 1 flow per core
CPU Core
Network 
interface
• Η ταχύτητα προώθησης ξεπερνά τα 7 Mpps με πακέτα 64 bytes
• Εξαντλείται η κάθε θύρα 1G με μεγάλα πακέτα (1500 bytes) 
Ταχύτητα Προώθησης Πακέτων
1-6 unidirectional flows, 64-byte packets, 1 flow per core
CPU Core
Network 
interface
• Η ταχύτητα προώθησης ξεπερνά τα 7 Mpps με πακέτα 64 bytes
• Εξαντλείται η κάθε θύρα 1G με μεγάλα πακέτα (1500 bytes) 
Ταχύτητα Προώθησης Πακέτων
1-6 unidirectional flows, 64-byte packets, 1 flow per core
CPU Core
Network 
interface
Μεταφορά Πακέτων
Core 1 Core 2
L 1 L 1
L 2
Core 3 Core 4
L 1 L 1
L 2
RX FIFO queue TX FIFO queue
DMA
DMA
4 ports NIC
North Bridge
PCIe
Front Side Bus
Memory
Bus
South Bridge Main Memory
Packet
data
Packet
descriptor
(1)
(2)
(3)
(4)
Τι Περιορίζει την Απόδοση;
Core 1 Core 2
L 1 L 1
L 2
Core 3 Core 4
L 1 L 1
L 2 4 ports NIC
North Bridge
PCIe
Bus
1.3 GHz Front Side Bus
Mem
Bus
South Bridge Main Memory
(4)
Bus 
Limitation ? 
Memory ?
• Για μνήμη PC-5300 (DDR2 667 MHz):
– Συχνότητα: 333 MHz 
– Καθυστέρηση: 3 ns/cycle
– CAS: 5 cycles
– RAS: 5 cycles
• Για κάθε προσπέλαση στη μνήμη θα πρέπει (το λιγότερο) να γίνει 
αλλαγή στήλης (CAS)
• Κόστος ανά προσπέλαση στη μνήμη (λόγω CAS):
– 5 cycles
– 5 cycles x 3 ns/cycle = 15 ns 
Καθυστέρηση Προσπέλασης στη Μνήμη
Column Address 
Selection (CAS)
Row 
Address 
Selection 
(RAS)
• Προσπελάσεις στη μνήμη κατά την προώθηση ενός πακέτου:
– 6 προσπελάσεις από την κάρτα δικτύου (3 κατά τη μετάδοση και 3 κατά 
τη λήψη του πακέτου)
– 4 προσπελάσεις από τη CPU
• Συνολική καθυστέρηση προσπέλασης στη μνήμη:
– 10 προσπελάσεις x 15 ns = 150 ns
• Επομένως η μέγιστη ταχύτητα προώθησης είναι 6.7 Mpps:
– Με πακέτα 1500 bytes: 78 Gbps
– Με πακέτα 64 bytes: 3.3 Gbps
Μέγιστη Ταχύτητα Προώθησης Πακέτων
Εικονικοί Δρομολογητές
• Εικονικός δρομολογητής:
– Εικονική μηχανή που εκτελεί λογισμικό δρομολόγησης:
• Ξεχωριστό επίπεδο προώθησης και ελέγχου για κάθε εικονικό 
δρομολογητή
• Χρήση τεχνολογιών εικονικοποίησης εξυπηρετητών (π.χ. Xen) για 
το διαμοιρασμό πόρων και την απομόνωση (isolation)
Εικονικοί Δρομολογητές
Control plane
Forw. plane
Control plane
Forw. plane
Control plane
Forw. plane
Control plane
Forw. plane
• Διασφάλιση των δεσμευμένων πόρων σε κάθε 
δρομολογητή (απομόνωση)
• Περιορισμός της σπατάλης πόρων (overhead) 
κατά τη φιλοξενία εικονικών δρομολογητών για 
υψηλή απόδοση
• Ευελιξία κατά την προώθηση πακέτων
Στόχοι Εικονικοποίησης Δρομολογητών
Απομόνωση Ευελιξία
Απόδοση
• Εξέταση διαφορετικών τρόπων προώθησης πακέτων για την 
επίτευξη:
– Υψηλής απόδοσης
– Υψηλού επιπέδου απομόνωσης
– Ευελιξίας
• Διαφορετικοί τρόποι προώθησης πακέτων:
– Προώθηση μέσω καναλιών Ε/Ε του Xen
– Χρήση ενός κοινού domain 
– Απευθείας σύνδεση στο δίκτυο
Εικονικοί Δρομολογητές με το Xen
Προώθηση μέσω Καναλιών Ε/Ε του Xen
 Υψηλό επίπεδο απομόνωσης
 Χαμηλή απόδοση (λόγω καθυστέρησης του επόπτη κατά την αλλαγή μεταξύ 
domains)
Προώθηση εντός ενός Κοινού Domain
 Υψηλή απόδοση
 Χαμηλό επίπεδο απομόνωσης (απαιτείται χρονοπρογραμματισμός της χρήσης 
της CPU από τους δρομολογητές)
Απευθείας Σύνδεση στο Δίκτυο
 Υψηλή απόδοση
 Υψηλό επίπεδο απομόνωσης
 Χρειάζονται κάρτες δικτύου με πολλές εικονικές ουρές για τη φιλοξενία 
πολλών εικονικών δρομολογητών
Πλατφόρμα Εικονικών Δρομολογητών
• Προώθηση εντός ενός κοινού domain (FP1)
• Προώθηση μέσω καναλιών Ε/Ε (FP2 ↔ FP2΄)
• Προώθηση με απευθείας σύνδεση στο δίκτυο (FP3)
Μετακίνηση Εικονικών Δρομολογητών
• Η μετακίνηση ενός εικονικού δρομολογητή προϋποθέτει τη μεταφορά:
– του επιπέδου δεδομένων 
– του επιπέδου ελέγχου
– των συνδέσεων δικτύου στο δρομολογητή
Μετακίνηση Εικονικού Δρομολογητή
VR1
Control
Plane
Data
Plane
VR2
Control
Plane
Data
Plane
• Το επίπεδο δεδομένων περιέχει μία βάση (Forwarding Information Base -
FIB), όπου αποθηκεύεται ο πίνακας προώθησης
• Η FIB περιέχει περίπου 600Κ καταχωρήσεις και τείνει να αυξηθεί
– Η μεταφορά της FIB διαρκεί αρκετά δευτερόλεπτα
– Το επίπεδο δεδομένων δεν θα λειτουργεί κατά τη μεταφορά, οπότε δεν 
θα είναι δυνατή η προώθηση πακέτων (με αποτέλεσμα την απώλειά 
τους) 
Μεταφορά Επιπέδου Δεδομένων
• Η μεταφορά του επιπέδου ελέγχου απαιτεί τη μεταφορά:
– του image, δηλ. τα προγράμματα δρομολόγησης και τις ρυθμίσεις
– της βάσης (Routing Information Base - RIB) όπου αποθηκεύεται ο 
πίνακας δρομολόγησης
• Η μεταφορά της RIB διαρκεί αρκετά δευτερόλεπτα
– Όλες οι ενημερώσεις δρομολόγησης που λαμβάνονται κατά τη διάρκεια 
της μεταφοράς θα χαθούν
– Τα πρωτόκολλα δρομολόγησης μπορεί να χρειαστεί να υπολογίσουν 
νέες διαδρομές
– Σημαντικό αντίκτυπο σε περιπτώσεις που ο εικονικός δρομολογητής 
συμμετέχει σε κάποια συνεδρία BGP, καθώς αυτό μπορεί να τερματιστεί 
Μεταφορά Επιπέδου Ελέγχου
• Κύριοι στόχοι: 
– Ελαχιστοποίηση των διαταραχών κατά τη μετακίνηση
• Ελάχιστες ή και καθόλου απώλειες πακέτων και μηνυμάτων 
δρομολόγησης (π.χ. αναγγελία διαδρομών)
– Διατήρηση της τοπολογίας του δικτύου
• Μετακίνηση σε 6 βήματα:
– Μετακίνηση του επιπέδου ελέγχου στον προορισμό
– Δημιουργία του επιπέδου δεδομένων στον προορισμό
Virtual Routers on the Move (VROOM)
• Βήμα 1: Δημιουργία tunnels για την επαναπροώθηση των μηνυμάτων 
δρομολόγησης
Μετακίνηση Δρομολογητών με το VROOM
VR1
Control
Plane
Data
Plane
VR2
Control
Plane
Data
Plane
• Βήμα 1: Δημιουργία tunnels για την επαναπροώθηση των μηνυμάτων 
δρομολόγησης
Μετακίνηση Δρομολογητών με το VROOM
VR1
Control
Plane
Data
Plane
VR2
Control
Plane
Data
Plane
• Βήμα 2: Mετακίνηση του επιπέδου ελέγχου στον προορισμό
– Μετακίνηση με pre-copy των αρχείων ρυθμίσεων και της μνήμης (RIB)
• Τα υπόλοιπα αρχεία θεωρείται ότι υπάρχουν στον υπολογιστή προορισμού
– Μετακίνηση με freeze-and-copy όλων των τροποποιημένων σελίδων 
μνήμης
• Σύντομο downtime κατά τη μεταφορά του επιπέδου ελέγχου
• Το επίπεδο δεδομένων λειτουργεί κανονικά
Μετακίνηση Δρομολογητών με το VROOM
VR1
Data
Plane
VR2
Control
Plane
Data
Plane
VR1
Control
Plane
• Βήμα 3: Επαναπροώθηση των μηνυμάτων δρομολόγησης στον προορισμό
– Το επίπεδο ελέγχου στον προορισμό είναι σε θέση να ενημερώνει τη 
FIB στον αρχικό υπολογιστή, κάθε φορά που λαμβάνεται ένα νέο 
μήνυμα δρομολόγησης
Μετακίνηση Δρομολογητών με το VROOM
VR1
Data
Plane
VR2
Control
Plane
Data
Plane
VR1
Control
Plane
routing messages
• Βήμα 4: Επαναδημιουργία του επιπέδου δεδομένων από το επίπεδο 
ελέγχου στον προορισμό
– Ενδεχόμενη μετακίνηση του επιπέδου δεδομένων στον προορισμό είναι 
περιττή:
• Η FIB μπορεί να σχηματιστεί απευθείας από τη RIB στον 
προορισμό
• Διαφορετικές τεχνολογίες μνήμης (π.χ. TCAM, SRAM) μεταξύ των 
δύο υπολογιστών μπορούν να περιπλέξουν ενδεχόμενη μετακίνηση
Μετακίνηση Δρομολογητών με το VROOM
VR1
Data
Plane
VR2
Control
Plane
Data
Plane
VR1
Control
Plane
Data
Plane
routing messages
• Βήμα 5: Μεταφορά των συνδέσεων δικτύου στον προορισμό
– Το διπλό επίπεδο δεδομένων επιτρέπει την ασύγχρονη μεταφορά τους
• Η εισερχόμενη και εξερχόμενη σύνδεση μπορούν να μεταφερθούν 
ξεχωριστά
Μετακίνηση Δρομολογητών με το VROOM
VR1
Data
Plane
VR2
Control
Plane
Data
Plane
VR1
Control
Plane
Data
Plane
• Βήμα 5: Μεταφορά των συνδέσεων δικτύου στον προορισμό
– Το διπλό επίπεδο δεδομένων επιτρέπει την ασύγχρονη μεταφορά τους
• Η εισερχόμενη και εξερχόμενη σύνδεση μπορούν να μεταφερθούν 
ξεχωριστά
Μετακίνηση Δρομολογητών με το VROOM
VR1
Data
Plane
VR2
Control
Plane
Data
Plane
VR1
Control
Plane
Data
Plane
• Βήμα 5: Μεταφορά των συνδέσεων δικτύου στον προορισμό
– Το διπλό επίπεδο δεδομένων επιτρέπει την ασύγχρονη μεταφορά τους
• Η εισερχόμενη και εξερχόμενη σύνδεση μπορούν να μεταφερθούν 
ξεχωριστά
Μετακίνηση Δρομολογητών με το VROOM
VR1
Data
Plane
VR2
Control
Plane
Data
Plane
VR1
Control
Plane
Data
Plane
• Βήμα 6: Κατάργηση του επιπέδου δεδομένων και των tunnels στον αρχικό 
υπολογιστή
– Μετά την ολοκήρωση της μετακίνησης, το παλιό επίπεδο δεδομένων και 
τα tunnels δεν χρειάζονται πλέον
Μετακίνηση Δρομολογητών με το VROOM
VR2
Control
Plane
Data
Plane
VR1
Control
Plane
Data
Plane
Βιβλιογραφία
• N. Egi, et al., Towards High Performance Virtual Routers on Commodity 
Hardware, ACM CoNEXT 2008
• N. Egi, M. Hoerdt, L. Mathy, P. Papadimitriou, A. Greenhalgh, M. Handley, 
and F. Huici, A Platform for High Performance and Flexible Virtual 
Routers on Commodity Hardware, ACM SIGCOMM Computer 
Communication Review, 40(1), 2010
• Z. Bozakov and P. Papadimitriou, OpenVRoute: An Open Architecture for 
High-Performance Programmable Virtual Routers, IEEE HPSR 2013
• Y. Wang et al., Virtual Routers on the Move: Live Router Migration as a 
Network-Management Primitive, ACM SIGCOMM 2008
Ερωτήσεις
Δικτυακή Λειτουργία ως 
Υπηρεσία Νέφους
Υπολογιστική Νέφους
Παναγιώτης Παπαδημητρίου
• Παραδοσιακά μοντέλα υπηρεσιών νέφους:
– Software as a Service (SaaS)
– Platform as a Service (PaaS)
– Infrastructure as a Service (IaaS)
• Νέα μοντέλα υπηρεσιών:
– Router as a Service
– Network as a Service
– SDN as a Service
– Radio Access Network as a Service
– Network Function as a Service
Υπηρεσίες Νέφους
• Παραδοσιακά μοντέλα υπηρεσιών νέφους:
– Software as a Service (SaaS)
– Platform as a Service (PaaS)
– Infrastructure as a Service (IaaS)
• Νέα μοντέλα υπηρεσιών:
– Router as a Service
– Network as a Service
– SDN as a Service
– Radio Access Network as a Service
– Network Function as a Service
Υπηρεσίες Νέφους
Δικτυακές Λειτουργίες σε Λογισμικό
• Εξάπλωση δικτυακών συσκευών (middleboxes) σε εταιρικά δίκτυα:
– Συσκευές ασφάλειας δικτύου:
– Firewalls
– Intrusion detection systems
– Proxies
– Εξισορροπητές φορτίου
– VPN
Middleboxes σε Εταιρικά Δίκτυα
• Εξάπλωση δικτυακών συσκευών (middleboxes) σε εταιρικά δίκτυα:
– Συσκευές ασφάλειας δικτύου:
– Firewalls
– Intrusion detection systems
– Proxies
– Εξισορροπητές φορτίου
– VPN
Middleboxes σε Εταιρικά Δίκτυα
• Τα middleboxes υστερούν σε:
– Επίπεδο προγραμματισμού
– Επεκτασιμότητα για την υποστήριξη νέων υπηρεσιών
• Τα middleboxes εμποδίζουν την παροχή νέων υπηρεσιών:
– Τα υπάρχοντα middleboxes δεν μπορούν να επεκταθούν ή 
αναβαθμιστούν για την υποστήριξη νέων λειτουργιών
– Χρειάζεται η αγορά και εγκατάσταση νέων middleboxes που να 
παρέχουν τις απαιτούμενες νέες λειτουργίες
– Το κόστος της αγοράς και εγκατάστασης νέων middleboxes συνήθως 
αποτρέπει τους ISPs από την παροχή νέων υπηρεσιών
Περιορισμοί Middleboxes
• Εναλλακτικά δικτυακές λειτουργίες μπορούν να υλοποιηθούν σε λογισμικό 
που τρέχει σε εξυπηρετητές ενός υπολογιστικού νέφους:
– Μειωμένο κόστος
– Εγκατάσταση δικτυακών λειτουργιών κατά απαίτηση του πελάτη
– Δυνατότητα επιλογής μεταξύ διαφόρων λειτουργιών που προσφέρει ο 
πάροχος
• Η εξέλιξη του υλικού των εξυπηρετητών παρέχει τα μέσα για την επίτευξη 
υψηλών ταχυτήτων επεξεργασίας πακέτων:
– Πολυπύρηνοι επεξεργαστές
– Περισσότερη κρυφή μνήμη (cache)
– Ταχύτατοι δίαυλοι μεταφοράς (π.χ. δίαυλος PCIe)
– Δυνατότητα χρήσης των καρτών γραφικών που έχουν ένα μεγάλο 
αριθμό από επεξεργαστές (GPUs)
Δικτυακές Λειτουργίες σε Λογισμικό
• Click Modular Router:
– Πληθώρα λειτουργιών για την επεξεργασία πακέτων
– Επεκτάσιμο
– Υποστήριξη πολυπύρηνων επεξεργαστών
• Snort:
– Εργαλείο καταγραφής, ανάλυσης και εξέτασης διερχόμενων πακέτων 
– Χρησιμοποιείται ευρύτατα για την υλοποίηση συστημάτων ανίχνευσης 
εισβολής (intrusion detection systems)
– Καταγραφή πακέτων μέσω της βιβλιοθήκης libpcap
– Ειδοποίηση στο διαχειριστή, όταν διέρχονται πακέτα ύποπτα για 
εισβολή
Λογισμικό για Υλοποίηση Δικτυακών Λειτουργιών
• Η εικονικοποίηση δικτυακών λειτουργιών (Network Function Virtualization –
NFV) επιτρέπει τη φιλοξενία πολλών δικτυακών λειτουργιών (network 
functions) σε ένα εξυπηρετητή
– Κάθε δικτυακή λειτουργία τοποθετείται σε μία ξεχωριστή εικονική μηχανή
• Τεχνολογίες εικονικών εξυπηρετητών (π.χ. Xen) επιτρέπουν: 
– Το διαμοιρασμό των πόρων μεταξύ των εικονικών δικτυακών 
λειτουργιών
– Την απομόνωση μεταξύ των εικονικών δικτυακών λειτουργιών
Εικονικοποίηση Δικτυακών Λειτουργιών (NFV)
Τομέας 
Διαχείρισης
Δικτυακή 
Λειτουργία
Επόπτης
NIC NIC NIC
Δικτυακή 
Λειτουργία
Δικτυακή 
Λειτουργία
• Οι διαχειριστές εταιρικών δικτύων καθορίζουν μία ακολουθία middleboxes 
διαμέσου των οποίων θα πρέπει να σταλούν τα διερχόμενα πακέτα
• Η ακολουθία εικονικών λειτουργιών (service chain) εκφράζει τη σειρά των 
λειτουργιών σύμφωνα με την πολιτική που εφαρμόζει ο διαχειριστής
– Η ακολουθία αυτή θα πρέπει να τηρείται από τον Πάροχο του 
Υπολογιστικού Νέφους 
Ακολουθίες Δικτυακών Λειτουργιών (Service Chains)
clients servers
clients
Load 
balancer
cache Redundancy Firewall
elimination
cache RE FW LB
Internet
• Η ακολουθία αυτή θα πρέπει να τηρείται από τον Πάροχο του Υπολογιστικού 
Νέφους
– Τα πακέτα θα πρέπει να δρομολογηθούν διαμέσου των εικονικών 
μηχανών που φιλοξενούν τις δικτυακές λειτουργίες (π.χ. μέσω SDN)
Ακολουθίες Δικτυακών Λειτουργιών (Service Chains)
clients cache
NIC
Guest 
Domain Cache Load 
Balancer
Virtual Switch
NIC NIC
clients cache
NIC
RE FW Guest 
Domain
Virtual Switch
NIC NIC
clients cache RE FW LB servers
OpenFlow Switch
• Η ακολουθία αυτή θα πρέπει να τηρείται από τον Πάροχο του Υπολογιστικού 
Νέφους
– Τα πακέτα θα πρέπει να δρομολογηθούν διαμέσου των εικονικών 
μηχανών που φιλοξενούν τις δικτυακές λειτουργίες (π.χ. μέσω SDN)
Ακολουθίες Δικτυακών Λειτουργιών (Service Chains)
clients cache
NIC
Guest 
Domain Cache Load 
Balancer
Virtual Switch
NIC NIC
clients cache
NIC
RE FW Guest 
Domain
Virtual Switch
NIC NIC
clients cache RE FW LB servers
OpenFlow Switch
Δικτυακή Λειτουργία ως Υπηρεσία Νέφους
Εγκατάσταση σε Κέντρα Δεδομένων
clients
clients servers
clients
Load 
balancer
cache Redundancy Firewall
elimination
cache RE FW LB
Internet
NFP 1 NFP 2 NFP 3
P P P
DC 
1.1 DC 
2.1
P
DC 
3.1
DC 
1.2 DC 
3.2
servers
Εγκατάσταση σε Κέντρα Δεδομένων
clients
clients servers
clients
Load 
balancer
cache Redundancy Firewall
elimination
cache RE FW LB
Internet
NFP 1 NFP 2 NFP 3
P P P
DC 
1.1 DC 
2.1
P
DC 
3.1
DC 
1.2 DC 
3.2
servers
?
Εγκατάσταση Κατά Μήκος της Διαδρομής
clients
servers
clients servers
clients
Load 
balancer
cache Redundancy Firewall
elimination
cache RE FW LB
Internet
NFP 1 NFP 2
NFP 3
Εγκατάσταση Κατά Μήκος της Διαδρομής
clients
servers
clients servers
clients
Load 
balancer
cache Redundancy Firewall
elimination
cache RE FW LB
Internet
NFP 1 NFP 2
NFP 3
• Εγκατάσταση σε κέντρα δεδομένων
 Η κάθε δικτυακή λειτουργία λαμβάνει μόνο τα πακέτα προς επεξεργασία
 Απαιτούνται τεχνικές για δρομολόγηση των πακέτων στα κέντρα 
δεδομένων (π.χ. ανακατεύθυνση μέσω DNS, δημιουργία tunnels)
• Μεγαλύτερη καθυστέρηση λόγω μακρύτερης διαδρομής
 Υψηλό φορτίο στις γραμμές πρόσβασης προς τα κέντρα δεδομένων
• Εγκατάσταση κατά μήκος της διαδρομής
 Δεν απαιτείται ανακατεύθυνση των πακέτων
 Σπατάλη πόρων
• Η κάθε δικτυακή λειτουργία μπορεί να λάβει και πακέτα που δεν 
χρειάζονται (από αυτήν) επεξεργασία και πρέπει απλώς να 
προωθηθούν
Σύγκριση Τρόπων Εγκατάστασης
Βιβλιογραφία
• J. Sherry, et al., Making Middleboxes Someone Else’s Problem: 
Network Processing as a Cloud Service, ACM SIGCOMM 2012 
• Snort, https://www.snort.org/
Ερωτήσεις
